if (self.CavalryLogger) { CavalryLogger.start_js(["dPpmK"]); }

__d("FBRTCCallConstants",[],(function a(b,c,d,e,f,g){f.exports={FBRTCCallConnectionType:{MISSED_CALL:4,CONNECTED_CALL:5},FBRTCCallType:{VOICE_CALL:1,VIDEO_CALL:2,COLLAB_VIDEO_CALL:3,COLLAB_SCREEN_SHARE_CALL:4}}}),null);
__d("LinkshimCallsites",[],(function a(b,c,d,e,f,g){f.exports={INTERNAL_WIKI:1,MZERO_UPSELL:2,EVENTS_TICKET:3,UNIT_TEST:4,WEB_RESULT:5,OG_COMMENT_NOTIF:6,M_DATA_UPSELL:7,FBURL:8,M_URI:9,THIRD_PARTY_URL:10,UI_LINK:11,LANDING_CAMPAIGN:12,STREAM_CONTENT_TICKER:13,SOCIAL_WIFI_DEPRECATED:14,TIMELINE_APP_COLLECTION:15,SAVED_LATER_VIEW_ITEM:16,REQUESTS_CONTROLLER:17,LOGIN_BUTTON:18,COMMENT_PLUGIN_REDIRECT_ENTAPP:19,COMMENT_PLUGIN_REDIRECT_APPOWNED:20,M_DEEPLINK:21,M_DEEPLINK_INVALID:22,EVENT_BUY_TICKET:23,PAGE_TYPEAHEAD:24,EGO_ACTION:25,INTERN_SURVEY:26,RETIRED_ENDPOINT:27,OG_COMMENT_FEEDBACK_TARGET:28,LIKE_COMMON_RENDERER:29,NOTIFICATIONS_LINK:30,COUPON_OFFSITE_LINK:31,MZERO_MAILTO:32,MZERO:33,MERCURY_SHARE_ATTACHMENT:34,EXTERNAL_TOKEN_SURVEY:35,FBURL_INTERN:36,LANDING_PAGE_EXPERIMENT:37,OG_FEEDBACK_TARGET:38,GAMEDAY:39,ENTISH:40,JS_ENV:41,LINKSHIM_AUTOMATION:42,TASKS_APP:45,FEEDBACK_MODEL:46,JP_EMAIL_LINK:47,NOTIFICATION_REWRITE:48,OG_ACTION_PERMALINK:49,MALWARE_SCAN:50,EMAIL_LINK:51,EMAIL_ATTACHMENT:52,RENDER_EMAIL_LEGACY:53,TAGGED_WITH_STORY_EMAIL_NOTIF:54,MSG_INTRO_NOTIF:55,GROUP_COMMENT_NOTIF:56,EVENT_INVITE_LOCATION_EMAIL:57,EVENT_INVITE_MESSAGE_EMAIL:58,CLOSE_FRIEND_ACTIVITY:59,GROUP_DOC_CREATED_URL:60,GROUP_DOC_CREATED_NAME:61,MALL_POST_EMAIL_NOTIF:62,MALL_POST_SOCIAL_MSG:63,NOTIFICATION_REWRITE_RSS:64,WALL_POST_SOCIAL_MSG:65,TITAN_MSG_BODY_EMAIL:66,TITAN_MSG_BODY_SUBJECT:67,GROUP_POST_EMAIL:68,GROUP_POST_URL_EMAIL:69,GROUP_POST_PERMALINK_EMAIL:70,GROUP_POST_OPTOUT_EMAIL:71,GROUP_POST_TEXT_NOTIF:72,CLOSE_FRIEND_EMAIL_SHARE:73,PLACE_TAGGED_IN_CHECKIN:74,QUESTIONS_ANSWER_EMAIL:75,SUPPORT_TASK_COMMENT:76,INVITE_MESSAGE_EMAIL:77,GROUP_REQUEST_TO_JOIN_EMAIL:78,GROUP_POST_COMMENT_PERMALINK:79,GROUP_POST_COMMENT_OPTOUT:80,GROUP_POST_COMMENT_TEXT:81,EVENT_NAME_CHANGE_NOTIF:82,EVENT_NAME_CHANGE_OLD_NAME_NOTIF:83,EVENT_NAME_CHANGE_NEW_NAME_NOTIF:84,EVENT_CANCEL_NOTIFICATION:85,BASE_COMMENT_NOTIF:86,FBPAGE_FAN_INVITE_NAME:87,FBPAGE_FAN_INVITE_MSG:88,MESSAGING_HTML_EMAIL:89,ROLLOUT_TEXT_EMAIL:90,COMMENT_EMAIL_TEXT:91,SHARE_CONTENT_LEGACY_EMAIL:92,MZERO_UPSELL_NOTIF:93,INTERN_DEBUG:94,CALL_TO_ACTION:95,QUICK_PROMOTION_ACTION:96,COMPOSED_TEXT:97,GIF_SEARCH:98,OFFERS:99,MZERO_ATTACHMENTS:100,MZERO_UPLOADS:101,CCTA_LINK:102,M_CCTA_LINK:103,SAVED_ITEM_REDIRECT:104,ADS_PROMOTED_OBJECT:105,EMBEDS_MTOUCH_SELECT:106,IORG_BOOKMARK:107,PAYPAL_INIT:108,FUNDRAISER_NOTIF:109,COMMENTS_PLUGIN_NOTIF:110,INSTANT_SHOPPING_ACTION:111,LINK_MENU:112,TALENT_SEARCH:113,COMET:114,INTERVIEW_STATS:115,SCHEDULR:116,BULK_SCHEDULR:117,CIRCA_LINK:118,MZERO_CHANGE_DESTINATION:119,LINK_REACT:120,LYNX_EXTRA_REDIRECT:121,UI_LINK_EXPERIMENTAL:122,COORD_DASHBOARD:123,WHITEHAT:124,INSTAGRAM_PROFILE_URL:125,INSTAGRAM_DIRECT_MESSAGE:126,SNAPTU:127,RHC_CLICK_TRACKING:128,NOTIFICATIONS_TARGET:129,INSTANT_WORKFLOWS_PAYMENT_RECEIPT:130,INTEGRITY_CRAWLER:131,KILL_LINKSHIM_SECURE_REDIRECT:132,INSTAGRAM_STORY_URL:133,INSTAGRAM_LINKSHIM_URL:134,UNTRUSTED_LINK_JS:135,LYNX_EXPIRED_LINK:136,LYNX_USER_CONFIRMED_LINK:137,LYNX_INVALID_PARAMS:138,REMARKUP:139,PAYMENT_REDIRECT:140,PAGES_PLATFORM_APP_SETTING:141,PAGES_WEBSITE:142,RECRUITING_EMAIL:143,MN_PLATFORM_CTA_WEBVIEW_URL:144,WALYNX_INTERNAL:145,INSTANT_ARTICLE_APP_CTA:146,INSTANT_ARTICLE_CTA_POLICY_LINK:147,INSTANT_ARTICLE_CTA_TERMS_LINK:148,STONEHENGE_SUBSCRIBE:149,STONEHENGE_LOGIN:150,PRODUCT_RECOMMENDATION_LINK:151,ENT_PROFILE_WEBSITE:152,PROFILE_LEGACY_WEBSITE:153}}),null);
__d("XLinkshimLinkAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/linkshim\/ajax\/link\/",{href:{type:"String",required:true},callsite:{type:"Enum",required:true,enumType:0}})}),null);
__d('LinkshimURI',['AsyncRequest','XLinkshimLinkAsyncController','isFacebookURI'],(function a(b,c,d,e,f,g){'use strict';var h={asyncGet:function i(j,k,l){if(c('isFacebookURI')(j)){l(j);return null}var m=c('XLinkshimLinkAsyncController').getURIBuilder().setString('href',j.toString()).setEnum('callsite',k).getURI(),n=new (c('AsyncRequest'))(m).setHandler(function(o){var p=o.getPayload();l(p.uri)});n.send();return n}};f.exports=h}),null);
__d('LinkshimLink.react',['Link.react','LinkshimURI','React','URI','areEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={shimURI:undefined},m}k.prototype.componentWillMount=function(){this.$LinkshimLink2(this.props)};k.prototype.componentWillUnmount=function(){this.$LinkshimLink3()};k.prototype.componentWillReceiveProps=function(l){if(!c('areEqual')(this.props,l))this.$LinkshimLink2(l);};k.prototype.$LinkshimLink3=function(){if(this.$LinkshimLink1)this.$LinkshimLink1.abandon();};k.prototype.$LinkshimLink2=function(l){this.$LinkshimLink3();this.$LinkshimLink1=c('LinkshimURI').asyncGet(l.uri,l.callsite,function(m){return this.setState({shimURI:m})}.bind(this))};k.prototype.render=function(){if(!this.state.shimURI)return this.props.loadingPlaceholder?this.props.loadingPlaceholder:null;var l=this.props,m=l.children,n=babelHelpers.objectWithoutProperties(l,['children']);return c('React').createElement(c('Link.react'),babelHelpers['extends']({href:this.state.shimURI},n),m)};k.propTypes={uri:j.instanceOf(c('URI')).isRequired,callsite:j.number.isRequired,loadingPlaceholder:j.element};f.exports=k}),null);
__d("XVideoCallAdminMessageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videocall\/admin_msg\/",{})}),null);
__d('FBRTCAdminMessage',['FBRTCConstants','FBRTCCallConstants','FBRTCLogger','FBRTCUtils','XVideoCallAdminMessageController','emptyFunction','performanceNow'],(function a(b,c,d,e,f,g){function h(i,j){'use strict';this.$FBRTCAdminMessage1=i;this.$FBRTCAdminMessage2=j;this.$FBRTCAdminMessage3=Date.now();this.$FBRTCAdminMessage4=null;this.$FBRTCAdminMessage5=null}h.prototype.onCallConnected=function(){'use strict';if(!this.$FBRTCAdminMessage4)this.$FBRTCAdminMessage4=c('performanceNow')();};h.prototype.onCallEnded=function(){'use strict';if(!this.$FBRTCAdminMessage5)this.$FBRTCAdminMessage5=c('performanceNow')();};h.prototype.submit=function(i,j){'use strict';if(!this.$FBRTCAdminMessage5)this.onCallEnded();var k=0,l=c('FBRTCCallConstants').FBRTCCallConnectionType.MISSED_CALL;if(this.$FBRTCAdminMessage4){k=Math.ceil(this.$FBRTCAdminMessage5-this.$FBRTCAdminMessage4);l=c('FBRTCCallConstants').FBRTCCallConnectionType.CONNECTED_CALL}var m=l===c('FBRTCCallConstants').FBRTCCallConnectionType.CONNECTED_CALL||j===c('FBRTCConstants').CallEndReason.IGNORE_CALL;this.$FBRTCAdminMessage6({peer_id:this.$FBRTCAdminMessage1,call_id:this.$FBRTCAdminMessage2,start_time:this.$FBRTCAdminMessage3,call_duration:k,message_type:l,call_category:i,call_acknowledged:m})};h.prototype.$FBRTCAdminMessage6=function(i){'use strict';var j=c('XVideoCallAdminMessageController').getURIBuilder().getURI();c('FBRTCUtils').sendServerRequest(j,c('emptyFunction'),this.$FBRTCAdminMessage7.bind(this,i.peer_id,i.call_id),false,null,i)};h.prototype.$FBRTCAdminMessage7=function(i,j,k){'use strict';var l;if(k){l='Fail to log admin message, error '+k.error}else l='Server timed out on logging admin message';c('FBRTCLogger').getInstance().logError(i,j,l)};f.exports=h}),null);
__d("FBRTCIceCache",[],(function a(b,c,d,e,f,g){function h(){"use strict";this.$FBRTCIceCache1={}}h.prototype.reset=function(i,j){"use strict";if(!this.$FBRTCIceCache1[i])this.$FBRTCIceCache1[i]={};this.$FBRTCIceCache1[i][j]=[]};h.prototype.cacheCandidate=function(i,j,k){"use strict";if(!this.$FBRTCIceCache1[i])this.$FBRTCIceCache1[i]={};if(!this.$FBRTCIceCache1[i][j])this.$FBRTCIceCache1[i][j]=[];this.$FBRTCIceCache1[i][j].unshift(k)};h.prototype.drainCandidates=function(i,j,k){"use strict";if(this.$FBRTCIceCache1[i]&&this.$FBRTCIceCache1[i][j]){var l;while(this.$FBRTCIceCache1[i][j].length>0){l=this.$FBRTCIceCache1[i][j].pop();k(l)}}};f.exports=h}),null);
__d('FBRTCExperiment',['FBRTCExperimentsConfig','QE'],(function a(b,c,d,e,f,g){'use strict';h.gen=function(i){var j={params:{},in_experiment:false,auto_exposure:false},k=c('FBRTCExperimentsConfig')[i]||j,l=new h(i,k.params,k.in_experiment);if(k.auto_exposure)l.logExposure(i);return l};function h(i,j,k){this.$FBRTCExperiment2=i;this.$FBRTCExperiment3=j;this.$FBRTCExperiment1=k}h.prototype.logExposure=function(){if(this.$FBRTCExperiment1)c('QE').logExposure(this.$FBRTCExperiment2);};h.prototype.getParam=function(i,j){if(this.$FBRTCExperiment3[i])return this.$FBRTCExperiment3[i].toString();return j};h.prototype.getInt=function(i,j){if(this.$FBRTCExperiment3[i])return parseInt(this.$FBRTCExperiment3[i],10);return j};h.prototype.getBool=function(i,j){var k=this.$FBRTCExperiment3;if(k[i])return k[i]==='1'||k[i]===1||k[i]==='true';return j};f.exports=h}),null);
__d('FBRTCSdpUtils',['UserAgent'],(function a(b,c,d,e,f,g){var h='m=video 0',i='m=video 0 NULL/NULL 0',j=function n(o){return o.match(/^a=rtpmap:(\d+)\s/)[1]},k=function n(o,p,q){var r=j(o[p]),s=o[q].split('RTP/SAVPF'),t=s[1].split(/\s+/),u=t.indexOf(r);t.splice(u,1);s[1]=t.join(' ');o[q]=s.join('RTP/SAVPF');o.splice(p,1)},l=function n(o,p,q){var r=j(o[p]);k(o,p,q);var s=new RegExp('^a=(rtcp-fb|fmtp):'+r+' ');o=o.filter(function(w){return !s.test(w)});var t=new RegExp('^a=fmtp:(\\d+)\\s+apt='+r+'($|;)'),u=o.reduce(function(w,x,y){var z=x.match(t);return z?[].concat(w,[z[1]]):w},[]).join('|'),v=new RegExp('^a=rtpmap:('+u+')\\s+rtx/|^a=fmtp:('+u+')\\s+apt=');return o.filter(function(w){return !v.test(w)})},m={replaceRTPSAVPFProfile:function n(o){var p='UDP/TLS/RTP/SAVPF',q='RTP/SAVPF';while(o.indexOf(p)>=0)o=o.replace(p,q);return o},addIceOptionToSdp:function n(o,p){'use strict';var q='a=ice-options:',r=o.indexOf(q);if(r>=0)return o.split('\r\n').map(function(y){return y.startsWith(q)?y+' '+p:y}).join('\r\n');var s=q+p,t=o.split('\r\n'),u=false,v=-1;for(var w=0;w<t.length;w++){var x=t[w].slice(0,2);if(x=='s='){u=true;continue}if(u&&x=='a='){v=w;break}}if(v>=0){t.splice(v,0,s);return t.join('\r\n')}return [o,s,'\r\n'].join('')},preferIsac:function n(o){var p=o.split('\r\n'),q=-1,r=-1,s=-1;for(var t=0;t<p.length;t++){var u=p[t];if(u.match(/m=audio\s+\d+\s+RTP\/SAVPF(\s+\d+)+/))q=t;if(s===-1&&q>-1&&u.match(/^a=rtpmap:/))s=t;if(u.match(/^a=rtpmap:\d+\s+ISAC\/16000/))r=t;}if(q===-1||r===-1||s===-1)return p.join('\r\n');var v=p[r];k(p,r,q);p.splice(s,0,v);p[q]=p[q].replace('RTP/SAVPF','RTP/SAVPF '+j(v));return p.join('\r\n')},preferCodec:function n(o,p,q){var r=o.split('\r\n'),s=new RegExp('m='+(q?'video':'audio')+'\\s+\\d+\\s+RTP/SAVPF(\\s+\\d+)+'),t=r.findIndex(function(z){return s.test(z)}),u=new RegExp('^a=rtpmap:\\d+\\s+'+p),v=r.findIndex(function(z){return u.test(z)}),w=/^a=rtpmap:/,x=r.findIndex(function(z,aa){return aa>t&&w.test(z)});if(t!==-1&&v!==-1&&x!==-1){var y=r[v];k(r,v,t);r.splice(x,0,y);r[t]=r[t].replace('RTP/SAVPF','RTP/SAVPF '+j(y))}return r.join('\r\n')},disableVideo:function n(o){var p=/m=video\s+\S+/;o=o.replace(p,h);if(c('UserAgent').isBrowser('Firefox <= 37'))o=this._makeDisabledVideoReceiveOnly(o);return o},_makeDisabledVideoReceiveOnly:function n(o){if(o.indexOf(h)>-1){var p=o.split(h);p[1]=p[1].replace(/send(recv|only)/,'recvonly');o=p.join(h)}return o},fixMobileIceSdp:function n(o){o=o.replace(/^a=/,'');o=o.split(/\s+username\s+.+password.+/)[0];var p=o.match(/\s+relay\s+|\s+srflx\s+/),q=o.match(/raddr.+rport.+/);if(p&&!q){p=p[0];var r=o.split(p),s=r[1].match(/^(\d+\.\d+\.\d+\.\d+)\s+(\d+)\s+/),t=void 0,u=void 0;if(s){t=s[1];u=s[2];r[1]=r[1].replace(s[0],'')}else{s=r[0].split(/\s+/);t=s[4];u=s[5]}o=''+r[0]+p+'raddr '+t+' rport '+u+' '+r[1]}return o},addAudioNack:function n(o){var p=[];o=o.split('\r\n').map(function(q){var r='';if(p.length>0&&(/^a=rtpmap:(\d+)/.test(q)||/^a=ssrc/.test(q)||/^m=/.test(q))){r+=this._getrtcpFeedbackLinesFromAudioFMTs(p)+'\r\n';p=[]}if(/^m=audio/.test(q))p=q.match(/^m=audio\s+[\d\/]+\s+[\w\/]+([\s+\d+]+)/)[1].trim().split(' ');return r+q}.bind(this)).join('\r\n');if(p.length>0)o+='\r\n'+this._getrtcpFeedbackLinesFromAudioFMTs(p);return o},addSetup:function n(o){if(o.indexOf('a=setup:')>=0)return o;var p=o.split('\r\n'),q=p.findIndex(function(s){return s.startsWith('s=')}),r=p.findIndex(function(s,t){return t>q&&s.startsWith('a=')});p.splice(r,0,'a=setup:actpass');return p.join('\r\n')},_getrtcpFeedbackLinesFromAudioFMTs:function n(o){return o.map(function(p){return 'a=rtcp-fb:'+p+' nack'}).join('\r\n')},removeFEC:function n(o){var p=o.split('\r\n'),q=void 0,r=void 0;for(var s=0;s<p.length;s++){if(p[s].match(/^a=rtpmap:\d+\s+red\//))q=s;if(p[s].match(/^m=video/))r=s;}if(q&&r)k(p,q,r);return p.join('\r\n')},removeH264:function n(o){var p=o.split('\r\n'),q=/^a=rtpmap:\d+\s+H264\//,r=p.findIndex(function(u){return q.test(u)}),s=/^m=video/,t=p.findIndex(function(u){return s.test(u)});return r!==-1&&t!==-1?l(p,r,t).join('\r\n'):o},removeVP9:function n(o){var p=o.split('\r\n'),q=/^a=rtpmap:\d+\s+VP9\//,r=p.findIndex(function(u){return q.test(u)}),s=/^m=video/,t=p.findIndex(function(u){return s.test(u)});return r!==-1&&t!==-1?l(p,r,t).join('\r\n'):o},isVideoSupported:function n(o){return o&&o.indexOf('m=video')!==-1&&(o.indexOf(h)===-1||o.indexOf(i)!==-1)},setDtlsRole:function n(o,p){if(!o.match(/setup:(active|passive|actpass)/)){return o.replace(/(a=fingerprint:.+)/g,'$1\r\na=setup:'+p)}else return o.replace(/setup:actpass/g,'setup:'+p);},setVideoBitrateConstraint:function n(o){var p=720;if(o.match(/^b=AS:/m))return o;o=o.replace(/^a=mid:video\r\n/m,'a=mid:video\r\nb=AS:'+p+'\r\n');return o},removeSdparta:function n(o){var p=o.split('\r\n'),q='audio',r=false,s=-1;for(var t=0;t<p.length;t++){var u=p[t];if(u.indexOf('m=audio')===0)q='audio';if(u.indexOf('m=video')===0){r=true;q='video'}if(u.indexOf('a=mid:sdparta_')===0)p[t]='a=mid:'+q;if(u.indexOf('a=group:BUNDLE sdparta_')===0)s=t;}if(s>-1)if(r){p[s]='a=group:BUNDLE audio video'}else p[s]='a=group:BUNDLE audio';return p.join('\r\n')},useDTLSOverCrypto:function n(o){if(!(c('UserAgent').isBrowser('Chrome >= 57')||c('UserAgent').isBrowser('Opera >= 44')))return o;if(!/^a=fingerprint:/m.test(o))return o;return o.split('\r\n').filter(function(p){return p.indexOf('a=crypto:')!==0}).join('\r\n')},validateOfferSdp:function n(o,p){var q;if(o.split(':')[0]==='LIVE'){var q=function(){var r=/^m=/,s=/^m=audio/,t=/^m=video/,u=/^a=ssrc:/,v=p.split('\r\n'),w=[];for(var x=v.length-1;x>=0;x--)if(r.test(v[x]))w.push(v.splice(x));var y=false,z=false;w.forEach(function(aa){if(s.test(aa[0])&&!y){y=aa.some(function(ba){return u.test(ba)})}else if(t.test(aa[0])&&!z)z=aa.some(function(ba){return u.test(ba)});});return {v:y&&z}}();if(typeof q==="object")return q.v;}return true},addNullVideo:function n(o){if(o.indexOf('m=video')!==-1)return o;if(o.indexOf('m=audio')===-1)return o+'\r\n'+i;var p=o.split('\r\n'),q=-1;for(var r=0;r<p.length;r++){var s=p[r];if(q>-1){if(!/^[abcik]=/.test(s))break;q=r}else if(s.indexOf('m=audio')===0)q=r;}p.splice(q+1,0,i);return p.join('\r\n')},hasNullVideo:function n(o){return o.indexOf(i)!==-1}};f.exports=m}),null);
__d('FBRTCMessage',['FBRTCConstants','FBRTCExperiment','FBRTCSdpUtils','FBRTCSupport','UserAgent'],(function a(b,c,d,e,f,g){var h='mobile';function i(j){'use strict';if(!this.$FBRTCMessage1(j))throw new Error('invalid webrtc message');this.originalMessageData=j;this.peerID=j.from;this.callID=parseInt(j.call_id,10);this.msg=JSON.parse(j.payload);this.msgType=this.msg.type;this.msgID=this.msg.msg_id;this.ackID=this.msg.ack_id;this.source=j.source;this.peerSupportsVideoInterop=!!this.msg.supports_video_interop;this.$FBRTCMessage2();this.$FBRTCMessage3();this.$FBRTCMessage4();this.$FBRTCMessage5()}i.prototype.$FBRTCMessage1=function(j){'use strict';return j.from&&j.call_id&&j.payload};i.prototype.$FBRTCMessage2=function(){'use strict';if(c('FBRTCSupport').isVideoInteropSupported()&&this.peerSupportsVideoInterop)return;if(this.isFromMobile())this.disableVideo();};i.prototype.disableVideo=function(){'use strict';if(this.msg.sdp)this.msg.sdp=c('FBRTCSdpUtils').disableVideo(this.msg.sdp);if(this.msgType===c('FBRTCConstants').PayloadType.SET_VIDEO||this.msgType===c('FBRTCConstants').PayloadType.OFFER||this.msgType===c('FBRTCConstants').PayloadType.ICERESTART_OFFER||this.msgType===c('FBRTCConstants').PayloadType.ANSWER||this.msgType===c('FBRTCConstants').PayloadType.ICERESTART_ANSWER)this.msg.videoon=false;};i.prototype.$FBRTCMessage3=function(){'use strict';if(this.isFromMobile()&&this.msg.sdp&&this.msgType!==c('FBRTCConstants').PayloadType.ICE_CANDIDATE)this.msg.sdp=c('FBRTCSdpUtils').removeFEC(this.msg.sdp);};i.prototype.$FBRTCMessage4=function(){'use strict';if(this.isFromMobile()&&c('FBRTCSupport').isWebrtcSupported()&&this.msg.sdp&&this.msgType!==c('FBRTCConstants').PayloadType.ICE_CANDIDATE){var j=c('FBRTCExperiment').gen('rtc_browser_use_h264'),k=j.getParam('allow_h264','no');if(k!=='yes')this.msg.sdp=c('FBRTCSdpUtils').removeH264(this.msg.sdp);}};i.prototype.$FBRTCMessage5=function(){'use strict';if(this.isFromMobile()&&c('FBRTCSupport').isWebrtcSupported()&&this.msg.sdp&&this.msgType!==c('FBRTCConstants').PayloadType.ICE_CANDIDATE){var j=c('FBRTCExperiment').gen('rtc_browser_use_vp9'),k=j.getParam('allow_vp9','no');if(k!=='yes')this.msg.sdp=c('FBRTCSdpUtils').removeVP9(this.msg.sdp);}};i.prototype.isOffer=function(){'use strict';return this.msgType===c('FBRTCConstants').PayloadType.OFFER};i.prototype.isFromMobile=function(){'use strict';return this.source===h};i.prototype.isRemoteVideoSupported=function(){'use strict';if(!this.msg.sdp||this.msgType===c('FBRTCConstants').PayloadType.ICE_CANDIDATE)return true;return c('FBRTCSdpUtils').isVideoSupported(this.msg.sdp)};i.prototype.isRetry=function(){'use strict';return !!this.msg.flag};i.prototype.isForCall=function(j){'use strict';return !j||j===this.callID||this.msgType===c('FBRTCConstants').PayloadType.OFFER||this.msgType===c('FBRTCConstants').PayloadType.ICERESTART_OFFER||this.msgType===c('FBRTCConstants').PayloadType.PCRESTART_OFFER||this.msgType===c('FBRTCConstants').PayloadType.ICE_CANDIDATE};i.prototype.getSignalingExperiments=function(){'use strict';if(this.isFromMobile()&&!this.msg.experiments)return ['sdp_update'];return this.msg.experiments};f.exports=i}),null);
__d("FBRTCMessageDedup",[],(function a(b,c,d,e,f,g){var h={},i={check:function j(k,l,m){if(!h[k])h[k]={};if(!h[k][l])h[k][l]={};if(h[k][l][m])return false;h[k][l][m]=true;return true}};f.exports=i}),null);
__d('BanzaiScribe',['Banzai'],(function a(b,c,d,e,f,g){function h(j){return {log:function k(l,m,n){var o=[m];if(n!=null)o.push(n);c('Banzai').post('scribe:'+l,o,j)}}}var i=h({});i.create=h;f.exports=i}),null);
__d('SamplingPolicyBase',[],(function a(b,c,d,e,f,g){function h(){'use strict';throw new Error('Tried to instantiate SamplingPolicyBase')}h.prototype.getName=function(){'use strict';return this.name};h.prototype.isSampled=function(){'use strict';if(typeof this.sampled=='undefined')this.sampled=this.decideIfSampled();return this.sampled};f.exports=h}),null);
__d('FbtraceForcedByServerPolicy',['FbtraceForcedByServer','SamplingPolicyBase'],(function a(b,c,d,e,f,g){'use strict';var h=void 0;function i(){this.name='FbtraceForcedByServerPolicy'}i.get=function(){if(typeof h=='undefined')h=new i();return h};function j(){return c('FbtraceForcedByServer').forced}Object.assign(i.prototype,c('SamplingPolicyBase').prototype,{decideIfSampled:j});f.exports=i}),null);
__d("guardFunction",[],(function a(b,c,d,e,f,g){function h(i,j,k){return function(){if(i.apply(k||this,arguments))j.apply(k||this,arguments);}}f.exports=h}),null);
__d('Fbtrace',['Arbiter','ArtilleryTraceIDUtils','BanzaiScribe','FbtraceForcedByServer','FbtraceForcedByServerPolicy','SiteData','guardFunction'],(function a(b,c,d,e,f,g){'use strict';function h(){Object.assign(this,h)}Object.assign(h,{isOn:function s(){return false},replySend:function s(t,u){},requestSend:function s(t,u,v){m(t,u);return {metadata:function w(){return undefined},replyReceive:function w(x){}}}});var i=new h();function j(s,t,u){if(!s)throw {name:'ArgumentError',message:'no valid service name specified'};if(!t)throw {name:'ArgumentError',message:'no valid version specified'};var v=c('BanzaiScribe'),w=0,x=c('ArtilleryTraceIDUtils').newTraceId(),y=c('ArtilleryTraceIDUtils').newObjectId(),z=c('ArtilleryTraceIDUtils').traceIdToBucket(x),aa={service:s,version:t},ba=function ga(ha){if(typeof ha=='undefined')return 'undefined';if(typeof ha!='string')ha=ga(JSON.stringify(ha));return ha},ca=function ga(ha){var ia='';for(var ja in ha){if(ia.length>0)ia+='\x02';ia+=ba(ja)+'\x03'+ba(ha[ja])}return ia},da=function ga(ha,ia,event,ja,ka){w++;return [ka,w,x,ha,ia,ba(event),ca(ja)].join('\x01')},ea=function ga(ha,ia,event,ja,ka){if(!ka&&typeof ka=='undefined')ka=Date.now()*1000;var la=da(ha,ia,event,ja,ka);v.log('fbtrace',la,z)},fa=function ga(){return y};ea(c('ArtilleryTraceIDUtils').getDummyId(),y,'#rqrecv',Object.assign(u||{},aa));Object.assign(this,j,{replySend:function ga(ha,ia){ia=babelHelpers['extends']({},ia,aa,{success:ha?'true':'false'});ea(c('ArtilleryTraceIDUtils').getDummyId(),y,'#rpsend',ia)},requestSend:function ga(ha,ia,ja){m(ha,ia);var ka=fa(),la=c('ArtilleryTraceIDUtils').newObjectId();ja=babelHelpers['extends']({},ja,aa,{op:ha,'remote:service':ia});ea(ka,la,'#rqsend',ja);return {metadata:function ma(){return x+la},replyReceive:function ma(na){ea(ka,la,'#rprecv',Object.assign(na||{},aa))},parentNode:this}}})}Object.assign(j,{isOn:function s(){return true}});function k(){return i}function l(s,t,u){u=u||{};u.init=true;var v=c('FbtraceForcedByServerPolicy').get();if(v.isSampled()){return new j(s,t,u)}else return new h();}function m(s,t){if(!s)throw {name:'ArgumentError',message:'no valid operation specified'};if(!t)throw {name:'ArgumentError',message:'no valid remote:service specified'};}function n(s,t){var u=i,v=void 0;i=s;try{v=t()}finally{i=u}return v}var o=function s(t,u){var v=k(),w=u.request,x=false;if(!v.isOn()&&c('FbtraceForcedByServer').forced&&/\/upload\/(?:composer|photos)\/|\/ajax\/composerx\/attachment\/media\//.test(w.uri.toString())){v=l('photo_upload_kludge',String(c('SiteData').client_revision||'dev'),{policy:'PhotoUpload'});x=true}if(v.isOn()){var y=x?{policy:'PhotoUpload'}:{};if(w.userActionId)y.user_action_id=w.userActionId;var z=v.requestSend(w.uri.toString(),'www',y);w.fbtraceRemoteNode=z;w.transport.setRequestHeader('X-Fbtrace-Meta',z.metadata())}},p=function s(t,u){u.request.fbtraceRemoteNode.replyReceive({is_last:u.response.is_last,success:true});setTimeout(function(){u.request.fbtraceRemoteNode.parentNode.replySend(true,{})},0)},q=function s(t,u){u.request.fbtraceRemoteNode.replyReceive({is_last:u.response.is_last,success:false,error_code:u.response.error,error_summary:u.response.errorSummary,error_description:u.response.errorDescription});setTimeout(function(){u.request.fbtraceRemoteNode.parentNode.replySend(false,{})},0)},r=function s(t,u){return u.request.fbtraceRemoteNode};c('Arbiter').subscribe('AsyncRequest/will_send',o);c('Arbiter').subscribe('AsyncRequest/response',c('guardFunction')(r,p));c('Arbiter').subscribe('AsyncRequest/error',c('guardFunction')(r,q));f.exports={defaultNode:k,requestReceive:l,withDefaultNode:n}}),null);
__d("XCollabCallSendMessageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/collab\/sendmessage\/",{recipient_id:{type:"Int",required:true},msg_id:{type:"Int",required:true},message_info:{type:"String",required:true},webrtc_fbtrace:{type:"Int"}})}),null);
__d("XVideoCallSendMessageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videocall\/sendmessage\/",{recipient_id:{type:"Int",required:true},msg_id:{type:"Int",required:true},message_info:{type:"String",required:true},webrtc_fbtrace:{type:"Int"}})}),null);
__d('FBRTCMessageSender',['errorCode','CurrentUser','FBRTCConfig','FBRTCConstants','FBRTCLogger','FBRTCUtils','Fbtrace','Map','SiteData','FBRTCSupport','XVideoCallSendMessageController','XCollabCallSendMessageController'],(function a(b,c,d,e,f,g,h){var i=0;function j(){'use strict';this.onSendFailure=null;this.$FBRTCMessageSender1=c('FBRTCLogger').getInstance()}j.prototype.sendOffer=function(k,l,m,n,o){'use strict';return this.$FBRTCMessageSender2(c('FBRTCConstants').PayloadType.OFFER,k,l,m,n,o)};j.prototype.sendAnswer=function(k,l,m,n,o){'use strict';return this.$FBRTCMessageSender2(c('FBRTCConstants').PayloadType.ANSWER,k,l,m,n,o)};j.prototype.sendPCRestartOffer=function(k,l,m,n,o){'use strict';return this.$FBRTCMessageSender2(c('FBRTCConstants').PayloadType.PCRESTART_OFFER,k,l,m,n,o)};j.prototype.sendSdpUpdate=function(k,l,m,n,o){'use strict';return this.$FBRTCMessageSender2(c('FBRTCConstants').PayloadType.SDP_UPDATE,k,l,m,n,o)};j.prototype.resendSdpMessage=function(k,l){'use strict';l.flag=1;this.$FBRTCMessageSender3(k,l)};j.prototype.resendPayload=function(k,l){'use strict';l.flag=1;this.$FBRTCMessageSender4(k,l)};j.prototype.$FBRTCMessageSender2=function(k,l,m,n,o,p){'use strict';var q=this.$FBRTCMessageSender5(m,k);q.sdp=n;if(k===c('FBRTCConstants').PayloadType.OFFER){q.handlescollision=true;q.pranswer=false}if(k===c('FBRTCConstants').PayloadType.OFFER||k===c('FBRTCConstants').PayloadType.ANSWER){q.icerestart=false;q.experiments=c('FBRTCConfig').supportedSignalingExperiments()}q.videoon=o;q.attributes=p;q.ull=c('FBRTCConstants').convertFromUploadLogLevel(c('FBRTCUtils').getLocalUploadLogLevel());this.$FBRTCMessageSender3(l,q);return q};j.prototype.sendIceCandidate=function(k,l,m){'use strict';var n=this.$FBRTCMessageSender5(l,c('FBRTCConstants').PayloadType.ICE_CANDIDATE);n.sdp_mid=m.sdpMid;n.label=m.sdpMLineIndex;n.sdp=m.candidate;if(m.isDirectScreenShareFromRecipient){n.attributes={};n.attributes.isDirectScreenShareFromRecipient=m.isDirectScreenShareFromRecipient}this.$FBRTCMessageSender4(k,n)};j.prototype.sendHangup=function(k,l,m,n,o){'use strict';var p=this.$FBRTCMessageSender5(l,c('FBRTCConstants').PayloadType.HANGUP);p.reason=c('FBRTCConstants').callEndReasonString(m);p.subreason=o||'';this.$FBRTCMessageSender4(k,p,n)};j.prototype.sendOtherDismiss=function(k){'use strict';var l=this.$FBRTCMessageSender5(k,c('FBRTCConstants').PayloadType.OTHER_DISMISS);this.$FBRTCMessageSender4(c('CurrentUser').getID(),l)};j.prototype.sendOfferAck=function(k,l,m){var n=arguments.length<=3||arguments[3]===undefined?new (c('Map'))():arguments[3];'use strict';this.$FBRTCMessageSender6(k,l,m,c('FBRTCConstants').PayloadType.OFFER_ACK,n)};j.prototype.sendOfferNack=function(k,l,m){'use strict';this.$FBRTCMessageSender6(k,l,m,c('FBRTCConstants').PayloadType.OFFER_NACK,new (c('Map'))([['error_code',1356043]]))};j.prototype.sendAnswerAck=function(k,l,m){'use strict';this.$FBRTCMessageSender6(k,l,m,c('FBRTCConstants').PayloadType.ANSWER_ACK)};j.prototype.sendAck=function(k,l,m){'use strict';this.$FBRTCMessageSender6(k,l,m,c('FBRTCConstants').PayloadType.ACK,new (c('Map'))([['ack_type',m.type]]))};j.prototype.sendMuteStateUpdate=function(k,l,m){'use strict';var n=this.$FBRTCMessageSender5(l,c('FBRTCConstants').PayloadType.SET_VIDEO);n.videoon=m;this.$FBRTCMessageSender4(k,n)};j.prototype.sendVideoEscalationRequest=function(k,l,m){'use strict';return this.sendVideoRequestResponse(k,l,0,m)};j.prototype.sendVideoRequestResponse=function(k,l,m,n){'use strict';var o=this.$FBRTCMessageSender5(l,c('FBRTCConstants').PayloadType.VIDEO_REQUEST);o.ack_id=m;o.videoon=n;o.capability=c('FBRTCSupport').getCapabilities();this.$FBRTCMessageSender4(k,o);return o};j.prototype.sendMsgAck=function(){'use strict'};j.prototype.sendOk=function(){'use strict'};j.prototype.sendPranswer=function(){'use strict'};j.prototype.sendIcerestartAnswer=function(){'use strict'};j.prototype.$FBRTCMessageSender5=function(k,l){'use strict';var m=c('FBRTCUtils').generateRandomInt(),n={version:i,type:l,call_id:k,msg_id:m};if(this.$FBRTCMessageSender7(l))n.supports_video_interop=true;return n};j.prototype.$FBRTCMessageSender7=function(k){'use strict';if(c('FBRTCSupport').isVideoInteropSupported())return k===c('FBRTCConstants').PayloadType.OFFER||k===c('FBRTCConstants').PayloadType.ANSWER||k===c('FBRTCConstants').PayloadType.PRANSWER||k===c('FBRTCConstants').PayloadType.ICERESTART_OFFER||k===c('FBRTCConstants').PayloadType.ICERESTART_ANSWER||k===c('FBRTCConstants').PayloadType.PCRESTART_OFFER||k===c('FBRTCConstants').PayloadType.PCRESTART_ANSWER||k===c('FBRTCConstants').PayloadType.SDP_UPDATE||k===c('FBRTCConstants').PayloadType.SET_VIDEO||k===c('FBRTCConstants').PayloadType.VIDEO_REQUEST;return false};j.prototype.$FBRTCMessageSender3=function(k,l){'use strict';this.$FBRTCMessageSender4(k,l,false,true,true)};j.prototype.$FBRTCMessageSender6=function(k,l,m,n){'use strict';var o=(arguments.length<=4?undefined:arguments[4])||new (c('Map'))(),p=this.$FBRTCMessageSender5(l,n);p.ack_id=m.msg_id;if(m.flag===1)p.flag=1;p.ull=c('FBRTCConstants').convertFromUploadLogLevel(c('FBRTCUtils').getLocalUploadLogLevel());o.forEach(function(q,r,s){p[r]=q});this.$FBRTCMessageSender4(k,p)};j.prototype.$FBRTCMessageSender4=function(k,l,m,n,o){'use strict';var p=l.msg_id,q={peer_id:k,call_id:l.call_id,msg_id:p,msg_type:l.type},r={call_id:l.call_id,msg_id:p,user_id:c('CurrentUser').getID(),recipient_id:k,msg_type:l.type,app_id:256281040558,app_version:String(c('SiteData').client_revision||'dev'),op:'sendServerRequest:'+l.type,policy:'WebRTC'},s=c('Fbtrace').requestReceive('browser',String(c('SiteData').client_revision||'dev'),r),t=(c('FBRTCUtils').isPeerVCEndpoint(k)?c('XCollabCallSendMessageController'):c('XVideoCallSendMessageController')).getURIBuilder().setInt('recipient_id',k).setInt('msg_id',p).setString('message_info',JSON.stringify(l)).setInt('webrtc_fbtrace',s.isOn()?1:0).getURI();if(n)var u=this.$FBRTCMessageSender4.bind(this,k,l,m,false,o);var v=this.$FBRTCMessageSender8.bind(this,q),w=this.$FBRTCMessageSender9.bind(this,q,u,o);c('Fbtrace').withDefaultNode(s,function(){c('FBRTCUtils').sendServerRequest(t,v,w,m)});if(this.onMessageSent)this.onMessageSent(k,l);this.$FBRTCMessageSender1.logSentMessage(k,l.call_id,l)};j.prototype.$FBRTCMessageSender8=function(k){'use strict';this.$FBRTCMessageSender1.logSentMessageSuccess(k.peer_id,k.call_id,k.msg_type,k.msg_id)};j.prototype.$FBRTCMessageSender9=function(k,l,m,n){'use strict';if(n)var o=n.getError?n.getError():n;this.$FBRTCMessageSender1.logSentMessageFailure(k.peer_id,k.call_id,k.msg_type,k.msg_id,o);var p=null;if(o===1356001||o===1356049){p=c('FBRTCConstants').CallEndReason.NO_PERMISSION}else if(o===1356046||o===1356045){p=c('FBRTCConstants').CallEndReason.CALLER_NOT_VISIBLE}else if(o===1356003||o===1356002||o===1356044)p=c('FBRTCConstants').CallEndReason.OTHER_NOT_CAPABLE;if(!p&&l){l();return}if(m&&this.onSendFailure){if(!p)p=c('FBRTCConstants').CallEndReason.SIGNALING_MESSAGE_FAILED;this.onSendFailure(p,o,k.msg_type)}};f.exports=j}),null);
__d('FBRTCPCConfig',['FBRTCConfig','FBRTCVersionDetection','RTCConfig'],(function a(b,c,d,e,f,g){var h="stun:stun.fbsbx.com:3478",i=function k(l,m,n){if(c('FBRTCVersionDetection').isChrome()&&c('FBRTCVersionDetection').webrtcVersion()>=34){var o={urls:l};if(m&&n){o.username=m;o.credential=n}return [o]}var p=[];for(var q=0;q<l.length;q++)if(m&&n){p.push({url:l[q],username:m,credential:n})}else p.push({url:l[q]});return p},j={setTurnCredentials:function k(l){this.turnIP=l.ip;this.udpPort=l.udp_port;this.tcpPort=l.tcp_port;this.sslPort=l.ssl_tcp_port;this.turnUsername=l.username;this.turnPassword=l.password},getConfig:function k(){if(c('FBRTCConfig').isVCEndpointCall()&&c('RTCConfig').CollabDisableBrowserTurnDiscoveryGK)return {iceServers:[]};var l=i([h]).concat(i(this._turnUrls(),this.turnUsername,this.turnPassword));return {iceServers:l}},getConstraints:function k(){return {mandatory:{},optional:[{DtlsSrtpKeyAgreement:true},{googHighBitrate:true},{googVeryHighBitrate:true}]}},_turnUrls:function k(){if(c('FBRTCVersionDetection').isFirefox()&&c('FBRTCVersionDetection').webrtcVersion()<27){return ['turn:'+this.turnIP+':'+this.udpPort]}else return ['turn:'+this.turnIP+':'+this.udpPort+'?transport=udp','turn:'+this.turnIP+':'+this.tcpPort+'?transport=tcp','turn:'+this.turnIP+':'+this.sslPort+'?transport=tcp'];}};f.exports=j}),null);
__d('FBRTCRetriableMessage',['mixInEventEmitter','FBRTCConstants'],(function a(b,c,d,e,f,g){var h=10000,i=7000,j=1;function k(l){'use strict';this.$FBRTCRetriableMessage1=l;this.$FBRTCRetriableMessage2=h;this.$FBRTCRetriableMessage3=j;this.$FBRTCRetriableMessage4=null;this.$FBRTCRetriableMessage5=null;this.$FBRTCRetriableMessage6=null}k.prototype.sendMessage=function(l,m,n,o,p,q){'use strict';this.$FBRTCRetriableMessage4=m;switch(l){case c('FBRTCConstants').PayloadType.PCRESTART_OFFER:this.$FBRTCRetriableMessage5=this.$FBRTCRetriableMessage1.sendPCRestartOffer(m,n,o,p,q);break;case c('FBRTCConstants').PayloadType.OFFER:this.$FBRTCRetriableMessage5=this.$FBRTCRetriableMessage1.sendOffer(m,n,o,p,q);break;case c('FBRTCConstants').PayloadType.ANSWER:this.$FBRTCRetriableMessage2=i;this.$FBRTCRetriableMessage5=this.$FBRTCRetriableMessage1.sendAnswer(m,n,o,p,q);break;}this.$FBRTCRetriableMessage7()};k.prototype.isAckMsg=function(l){'use strict';return this.$FBRTCRetriableMessage5&&this.$FBRTCRetriableMessage5.msg_id===l.ack_id};k.prototype.stopRetrying=function(){'use strict';if(this.$FBRTCRetriableMessage6){clearTimeout(this.$FBRTCRetriableMessage6);this.$FBRTCRetriableMessage4=null;this.$FBRTCRetriableMessage5=null;this.$FBRTCRetriableMessage6=null}};k.prototype.$FBRTCRetriableMessage7=function(){'use strict';this.$FBRTCRetriableMessage6=setTimeout(this.$FBRTCRetriableMessage8.bind(this),this.$FBRTCRetriableMessage2)};k.prototype.$FBRTCRetriableMessage8=function(){'use strict';if(this.$FBRTCRetriableMessage3<1){this.emit('timeoutFailure')}else{this.emit('sendingRetry');this.$FBRTCRetriableMessage1.resendSdpMessage(this.$FBRTCRetriableMessage4,this.$FBRTCRetriableMessage5);this.$FBRTCRetriableMessage7();this.$FBRTCRetriableMessage3-=1}};c('mixInEventEmitter')(k,{sendingRetry:true,timeoutFailure:true});f.exports=k}),null);
__d('FBRTCStreamWrapper',['mixInEventEmitter','FBRTCUtils'],(function a(b,c,d,e,f,g){var h=100,i=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,j;function k(){'use strict';this.$FBRTCStreamWrapper1=true;this.$FBRTCStreamWrapper2=true;this.$FBRTCStreamWrapper3=null;this.$FBRTCStreamWrapper4=null;this.aspectRatio=k.aspectRatios.other;this.videoWidth=0;this.videoHeight=0}k.prototype.setStream=function(l){var m=arguments.length<=1||arguments[1]===undefined?true:arguments[1];'use strict';var n=this.hasStream();this.stop();this.$FBRTCStreamWrapper3=l;this.$FBRTCStreamWrapper5();this.$FBRTCStreamWrapper6();if(m){this.$FBRTCStreamWrapper3.onaddtrack=this.$FBRTCStreamWrapper7.bind(this);this.$FBRTCStreamWrapper3.onremovetrack=this.$FBRTCStreamWrapper7.bind(this);this.$FBRTCStreamWrapper3.onended=this.$FBRTCStreamWrapper8.bind(this);if(n)this.emit('tracksChanged');}};k.prototype.getStreamId=function(){'use strict';return this.$FBRTCStreamWrapper3&&this.$FBRTCStreamWrapper3.id};k.prototype.getStream=function(){'use strict';return this.$FBRTCStreamWrapper3};k.prototype.hasStream=function(){'use strict';return !!this.$FBRTCStreamWrapper3};k.prototype.stop=function(){'use strict';if(this.$FBRTCStreamWrapper3){k.stopStream(this.$FBRTCStreamWrapper3);this.$FBRTCStreamWrapper3=null}};k.prototype.hasVideoTracks=function(){'use strict';if(this.$FBRTCStreamWrapper3&&this.$FBRTCStreamWrapper3.getVideoTracks)return this.$FBRTCStreamWrapper3.getVideoTracks().length>0;return true};k.prototype.hasVideo=function(){'use strict';return this.$FBRTCStreamWrapper2&&this.hasVideoTracks()};k.prototype.hasAudioTracks=function(){'use strict';if(this.$FBRTCStreamWrapper3&&this.$FBRTCStreamWrapper3.getAudioTracks)return this.$FBRTCStreamWrapper3.getAudioTracks().length>0;return true};k.prototype.hasAudio=function(){'use strict';return this.$FBRTCStreamWrapper1&&this.hasAudioTracks()};k.prototype.attachToVideoTag=function(l){'use strict';if(this.$FBRTCStreamWrapper3){this.$FBRTCStreamWrapper4=l;c('FBRTCUtils').attachMediaStream(l,this.$FBRTCStreamWrapper3);this.$FBRTCStreamWrapper9(l)}};k.prototype.getAudioAnalyser=function(){'use strict';if(this.$FBRTCStreamWrapper3){var l=this.$FBRTCStreamWrapper10(),m=l.createMediaStreamSource(this.$FBRTCStreamWrapper3),n=l.createAnalyser();n.fftSize=2048;m.connect(n);return n}};k.prototype.$FBRTCStreamWrapper10=function(){'use strict';if(!j)j=new i();return j};k.prototype.toggleMuteAudio=function(){'use strict';if(!this.hasAudioTracks())return;this.$FBRTCStreamWrapper1=!this.$FBRTCStreamWrapper1;this.$FBRTCStreamWrapper5()};k.prototype.$FBRTCStreamWrapper5=function(){'use strict';if(this.$FBRTCStreamWrapper3){var l=this.$FBRTCStreamWrapper3.getAudioTracks();for(var m=0;m<l.length;m++)l[m].enabled=this.$FBRTCStreamWrapper1;}};k.prototype.toggleMuteVideo=function(){'use strict';this.$FBRTCStreamWrapper2=!this.$FBRTCStreamWrapper2;if(this.$FBRTCStreamWrapper2){this.$FBRTCStreamWrapper6()}else setTimeout(this.$FBRTCStreamWrapper6.bind(this),500);this.$FBRTCStreamWrapper7()};k.prototype.$FBRTCStreamWrapper6=function(){'use strict';if(this.$FBRTCStreamWrapper3){var l=this.$FBRTCStreamWrapper3.getVideoTracks();for(var m=0;m<l.length;m++)l[m].enabled=this.$FBRTCStreamWrapper2;}};k.prototype.setVideoEnabled=function(l){'use strict';this.$FBRTCStreamWrapper2=l;this.$FBRTCStreamWrapper6();this.$FBRTCStreamWrapper7()};k.prototype.$FBRTCStreamWrapper9=function(l){'use strict';if(!this.hasVideo()||l.currentTime>0){this.$FBRTCStreamWrapper11(l)}else setTimeout(this.$FBRTCStreamWrapper9.bind(this,l),h);};k.prototype.$FBRTCStreamWrapper12=function(l){'use strict';this.videoWidth=l.videoWidth;this.videoHeight=l.videoHeight;var m=l.videoWidth/l.videoHeight;if(c('FBRTCUtils').aboutEqual(m,16/9))return k.aspectRatios['16:9'];if(c('FBRTCUtils').aboutEqual(m,4/3))return k.aspectRatios['4:3'];return k.aspectRatios.other};k.prototype.$FBRTCStreamWrapper11=function(l){'use strict';if(this.hasVideo()){this.aspectRatio=this.$FBRTCStreamWrapper12(l)}else this.aspectRatio=k.aspectRatios.other;this.emit('streamStarted')};k.prototype.$FBRTCStreamWrapper8=function(){'use strict';this.emit('streamEnded')};k.prototype.$FBRTCStreamWrapper7=function(event){'use strict';if(this.$FBRTCStreamWrapper13(event))this.attachToVideoTag(this.$FBRTCStreamWrapper4);this.emit('tracksChanged')};k.prototype.$FBRTCStreamWrapper13=function(l){'use strict';return this.$FBRTCStreamWrapper4&&l&&l.type==='addtrack'&&l.track.kind==='video'};k.aspectRatios={'16:9':1,'4:3':2,other:3};c('mixInEventEmitter')(k,{streamStarted:true,streamEnded:true,tracksChanged:true});k.stopStream=function(l){if('active' in l){if(l.active)l.getTracks().forEach(function(m){m.stop()});}else if('stop' in l)l.stop();};f.exports=k}),null);
__d("XVideoCallTurnDiscoveryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videocall\/turndiscovery\/",{version:{type:"Int",required:true}})}),null);
__d('FBRTCTurnDiscovery',['Promise','FBRTCLogger','FBRTCUtils','XVideoCallTurnDiscoveryController'],(function a(b,c,d,e,f,g){var h=3,i=null,j={requestTurnCreds:function k(l,m){var n=arguments.length<=2||arguments[2]===undefined?h:arguments[2];if(i)return i;var o=1,p=c('XVideoCallTurnDiscoveryController').getURIBuilder().setInt('version',o).getURI();i=new (c('Promise'))(function(q,r){s(n);function s(t){c('FBRTCUtils').sendServerRequest(p,function(u){var v=u.payload;return q(v)},function(){if(t>0){c('FBRTCLogger').getInstance().logError(m,l,'Failed turn; going to retry');s(t-1)}else r(new Error('failed'));})}});return i}};f.exports=j}),null);
__d("XGroupCallController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/groupcall\/{?conference_name}\/",{conference_name:{type:"String",required:true},call_id:{type:"Int"},users_to_ring:{type:"FBIDSet",defaultValue:[]},has_video:{type:"Bool",defaultValue:true},server_info_data:{type:"String"},nonce:{type:"String"}})}),null);
__d("XGroupCallSigningController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/groupcall\/init\/",{conference_name:{type:"String",required:true},call_id:{type:"Int"},users_to_ring:{type:"FBIDSet",defaultValue:[]},has_video:{type:"Bool",defaultValue:false},server_info_data:{type:"String"},nonce:{type:"String"}})}),null);
__d("XVideoCallController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videocall\/incall\/",{peer_id:{type:"FBID",required:true},call_id:{type:"Int"},is_caller:{type:"Bool",defaultValue:false},audio_only:{type:"Bool",defaultValue:false},nonce:{type:"String"}})}),null);
__d("XVideoCallInitController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videocall\/init\/",{peer_id:{type:"FBID",required:true},call_id:{type:"Int",required:true},is_caller:{type:"Bool",defaultValue:false},audio_only:{type:"Bool",defaultValue:false}})}),null);
__d("XWirelessScreenSharingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/screen_sharing\/{?session_id}\/",{nonce:{type:"String"},peer_id:{type:"FBID",required:true},session_id:{type:"Int"}})}),null);
__d('FBRTCUrlManager',['regeneratorRuntime','Promise','CurrentUser','FBRTCConfig','FBRTCLogger','FBRTCUtils','URI','XGroupCallController','XGroupCallSigningController','XVideoCallController','XVideoCallInitController','XWirelessScreenSharingController'],(function a(b,c,d,e,f,g){var h=3,i=function p(q,r,s,t){c('FBRTCLogger').getInstance().logCallAction(q,r,c('FBRTCLogger').CallAction.OLD_URI);return c('XVideoCallController').getURIBuilder().setFBID('peer_id',q).setInt('call_id',r).setBool('is_caller',s).setBool('audio_only',t).getURI()},j=function p(q,r,s,t,u,v){var w=arguments.length<=6||arguments[6]===undefined?h:arguments[6],x=arguments.length<=7||arguments[7]===undefined?'':arguments[7];if(w===undefined||w===null)w=h;var y=c('XVideoCallInitController').getURIBuilder().setFBID('peer_id',q).setInt('call_id',r).setBool('is_caller',s).setBool('audio_only',t).getURI();y=c('FBRTCUtils').isPeerVCEndpoint(q)||x==='quickdial'?k(y):y;c('FBRTCUtils').sendServerRequest(y,function(z){u(z.payload.uri)},function(z){if(w>0){p(q,r,s,t,u,v,w-1,x)}else u(i(q,r,s,t));})};function k(p){if(c('CurrentUser').isEmployee()){p=p.setSubdomain(c('CurrentUser').hasWorkUser()||c('CurrentUser').isWorkUser()?'fb':'www');var q='/intern/';return c('URI').getRequestURI().getPath().substr(0,q.length)!==q?p:p.setDomain(p.getDomain().toString().replace(/.(intern|cstools)./,'.'))}return p}function l(p){var q=p.conferenceName,r=p.callID,s=p.usersToRing,t=p.hasVideo,u=p.nonce,v=p.serverInfoData,w;return c('regeneratorRuntime').async(function x(y){while(1)switch(y.prev=y.next){case 0:w=c('XGroupCallSigningController').getURIBuilder().setString('conference_name',q).setInt('call_id',r).setFBIDSet('users_to_ring',s).setBool('has_video',t).setString('server_info_data',v).setString('nonce',u).getURI();return y.abrupt('return',new (c('Promise'))(function(z,aa){c('FBRTCUtils').sendServerRequest(w,function(ba){z(ba.payload.uri)},function(ba){aa(ba)})}));case 2:case 'end':return y.stop();}},null,this)}var m=function p(q,r,s,t,u,v,w){if(w===undefined||w===null)w=h;var x=c('XGroupCallSigningController').getURIBuilder().setFBID('call_id',q).setBool('is_caller',s).setBool('audio_only',t).setFBIDSet('users_to_ring',r).getURI();c('FBRTCUtils').sendServerRequest(x,function(y){u(y.payload.uri)},function(y){if(w>0){p(q,r,s,t,u,v,w-1)}else{var z=c('XGroupCallController').getURIBuilder().setFBID('call_id',q).setBool('is_caller',s).setBool('audio_only',t).setFBIDSet('users_to_ring',r).getURI();u(z)}})},n=function p(q){if(c('FBRTCConfig').disableURLManager())return;window.history.replaceState({},'',q)},o={init:function p(q){this._peerID=q},onCallStarted:function p(){n(i(this._peerID))},getCallUri:j,getGroupCallUri:function p(q,r,s,t,u,v){var w;return c('regeneratorRuntime').async(function x(y){while(1)switch(y.prev=y.next){case 0:w=0;case 1:if(!(w<3)){y.next=14;break}y.prev=2;y.next=5;return c('regeneratorRuntime').awrap(l({conferenceName:q,callID:r,usersToRing:s,hasVideo:t,nonce:u,serverInfoData:v}));case 5:return y.abrupt('return',y.sent);case 8:y.prev=8;y.t0=y['catch'](2);case 11:w++;y.next=1;break;case 14:return y.abrupt('return',c('XGroupCallController').getURIBuilder().setString('conference_name',q).setInt('call_id',r).setFBIDSet('users_to_ring',s).setBool('has_video',t).setString('server_info_data',v).setString('nonce',u).getURI());case 15:case 'end':return y.stop();}},null,this,[[2,8]])},getNonceUri:function p(q,r,s,t,u){var v=arguments.length<=5||arguments[5]===undefined?'':arguments[5],w=c('XVideoCallController').getURIBuilder().setFBID('peer_id',q).setInt('call_id',r).setBool('is_caller',s).setBool('audio_only',t).setString('nonce',u).getURI();return c('FBRTCUtils').isPeerVCEndpoint(q)||v==='quickdial'?k(w):w},getWirelessScreenSharingUri:function p(q,r,s){var t=c('XWirelessScreenSharingController').getURIBuilder().setFBID('peer_id',r).setInt('session_id',s).setString('nonce',q).getURI();return k(t)}};f.exports=o}),null);
__d('RTCMediaDevices',['invariant','Promise','RTCOnDeviceChangePoller'],(function a(b,c,d,e,f,g,h){'use strict';var i=navigator.mediaDevices&&typeof navigator.mediaDevices.enumerateDevices==='function',j=window.MediaStreamTrack&&window.MediaStreamTrack.getSources==='function',k=1000,l=void 0,m={addEventListener:function o(p,q){if(p==='devicechange'&&c('RTCOnDeviceChangePoller').isNeeded()){if(!l)l=new (c('RTCOnDeviceChangePoller'))(k);l.add(q);return}var r=navigator,s=r.mediaDevices;if(s&&'addEventListener' in s)s.addEventListener(p,q);},removeEventListener:function o(p,q){if(p==='devicechange'&&c('RTCOnDeviceChangePoller').isNeeded()){if(l)l.remove(q);return}var r=navigator,s=r.mediaDevices;if(s&&'removeEventListener' in s)s.removeEventListener(p,q);},isSupported:function o(p){switch(p){case 'enumerateDevices':return i||j;default:return Boolean(navigator.mediaDevices);}},enumerateDevices:function o(){if(i){navigator.mediaDevices||h(0);return c('Promise').resolve(navigator.mediaDevices.enumerateDevices())}else if(j)return new (c('Promise'))(function(p){return window.MediaStreamTrack.getSources(p)}).then(n);return c('Promise').reject(new Error('enumerateDevices() not supported'))},filterDevicesOfKind:function o(p,q){return p.filter(function(r){return r.kind===q})}};function n(o){return o.map(function(p){var q=p.id,r=p.kind,s=p.label;return {deviceId:q,groupId:'',kind:r==='video'?'videoinput':'audioinput',label:s}})}f.exports=m}),null);
__d('RTCOnDeviceChangePoller',['Promise','RTCMediaDevices'],(function a(b,c,d,e,f,g){h.isNeeded=function(){'use strict';var i=navigator,j=i.mediaDevices;if(!c('RTCMediaDevices').isSupported('enumerateDevices')||j&&'ondevicechange' in j)return false;return true};function h(i){'use strict';this.$RTCOnDeviceChangePoller1=[];this.$RTCOnDeviceChangePoller2='';this.$RTCOnDeviceChangePoller3=0;this.$RTCOnDeviceChangePoller4=0;this.$RTCOnDeviceChangePoller7=function(){c('RTCMediaDevices').enumerateDevices().then(function(j){var k=j.map(function(q){return q.deviceId+':'+q.label+':'+q.groupId}).sort().join('~');if(k===this.$RTCOnDeviceChangePoller2)return;this.$RTCOnDeviceChangePoller2=k;for(var l=this.$RTCOnDeviceChangePoller1,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{n=l.next();if(n.done)break;o=n.value}var p=o;try{p()}catch(q){}}}.bind(this))['catch'](function(j){return c('Promise').resolve()}).then(function(){this.$RTCOnDeviceChangePoller4=setTimeout(this.$RTCOnDeviceChangePoller7,this.$RTCOnDeviceChangePoller3)}.bind(this))['catch'](function(j){})}.bind(this);this.$RTCOnDeviceChangePoller3=i}h.prototype.add=function(i){'use strict';this.$RTCOnDeviceChangePoller1.push(i);this.$RTCOnDeviceChangePoller5()};h.prototype.remove=function(i){'use strict';this.$RTCOnDeviceChangePoller1=this.$RTCOnDeviceChangePoller1.filter(function(j){return j!==i});this.$RTCOnDeviceChangePoller6()};h.prototype.$RTCOnDeviceChangePoller5=function(){'use strict';if(this.$RTCOnDeviceChangePoller4!==0)return;this.$RTCOnDeviceChangePoller4=setTimeout(this.$RTCOnDeviceChangePoller7,0)};h.prototype.$RTCOnDeviceChangePoller6=function(){'use strict';if(this.$RTCOnDeviceChangePoller1.length>0)return;if(this.$RTCOnDeviceChangePoller4!==0){clearTimeout(this.$RTCOnDeviceChangePoller4);this.$RTCOnDeviceChangePoller4=0}};f.exports=h}),null);
__d('FBRTCUserSettings',['Promise','FBRTCConfig','RTCMediaDevices','mixInEventEmitter'],(function a(b,c,d,e,f,g){'use strict';var h={audioInput:'',audioOutput:'default',videoInput:'',remoteStream:null,_audioInputLabel:null,_videoInputLabel:null,isEnabled:function i(){return Boolean(c('RTCMediaDevices').isSupported('enumerateDevices')&&c('FBRTCConfig').settingsEnabled())},selectAudioInputByLabel:function i(j){if(!this.audioInput)this.audioInput=this._selectByLabel(j,this._audioInputLabel);return this.audioInput},selectVideoInputByLabel:function i(j){if(!this.videoInput)this.videoInput=this._selectByLabel(j,this._videoInputLabel);return this.videoInput},_selectByLabel:function i(j,k){for(var l=j,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{n=l.next();if(n.done)break;o=n.value}var p=o;if(k&&k===p.label)return p.deviceId;}return null},previewStart:function i(){this.emit('previewStarted')},previewEnd:function i(){this.emit('previewEnded')},save:function i(j){var k=j.audioInput,l=j.audioOutput,m=j.videoInput;return new (c('Promise'))(function(n){var o=!!(k&&this.audioInput!==k||m&&this.videoInput!==m);this.audioInput=k;this.audioOutput=l;this.videoInput=m;this.emit('saved',o);n(o)}.bind(this))},updateForLocalStream:function i(j){if(j.videoMediaSourceId){this.videoInput=j.videoMediaSourceId}else{var k=j.getVideoTracks(),l=k[0];if(l)this._videoInputLabel=l.label;}if(j.audioMediaSourceId){this.audioInput=j.audioMediaSourceId}else{var m=j.getAudioTracks(),n=m[0];if(n)this._audioInputLabel=n.label;}},updateForRemoteStream:function i(j){this.remoteStream=j;this.emit('remoteStreamChanged')},addListener:function i(){},emit:function i(){}};c('mixInEventEmitter')(h,{previewStarted:true,previewEnded:true,remoteStreamChanged:true,saved:true});f.exports=h}),null);
__d('FBRTCCallControlPopover.react',['fbt','LayerFadeOnHide','LayerFadeOnShow','React','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIContextualDialogTitle.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l={NONE:0,REMOTE_VIDEO_UNSUPPORTED:1,NO_VIDEO_TRACKS:2,VIDEO_AUTO_DISABLED:3,SCREENSHARING_UNAVAILABLE:4,PEER_IS_SHARING_SCREEN:5,IS_AUDIO_CALL:6};i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;m.prototype.render=function(){var n=this.$FBRTCCallControlPopover1();if(n)return c('React').createElement(c('XUIContextualDialog.react'),this.$FBRTCCallControlPopover2(),n,this.$FBRTCCallControlPopover3());return c('React').createElement(c('XUIContextualDialog.react'),this.$FBRTCCallControlPopover2(),this.$FBRTCCallControlPopover3())};m.prototype.$FBRTCCallControlPopover1=function(){if(this.props.reason===l.NO_VIDEO_TRACKS)return c('React').createElement(c('XUIContextualDialogTitle.react'),{className:this.props.className},h._("\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e01\u0e25\u0e49\u0e2d\u0e07"));return null};m.prototype.$FBRTCCallControlPopover3=function(){var n=null;switch(this.props.reason){case l.NONE:break;case l.REMOTE_VIDEO_UNSUPPORTED:n=h._("\u0e21\u0e35\u0e01\u0e32\u0e23\u0e1b\u0e34\u0e14\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d\u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a\u0e2a\u0e32\u0e22\u0e01\u0e32\u0e23\u0e42\u0e17\u0e23\u0e19\u0e35\u0e49\u0e40\u0e19\u0e37\u0e48\u0e2d\u0e07\u0e08\u0e32\u0e01\u0e2d\u0e38\u0e1b\u0e01\u0e23\u0e13\u0e4c\u0e02\u0e2d\u0e07 {name} \u0e44\u0e21\u0e48\u0e2a\u0e19\u0e31\u0e1a\u0e2a\u0e19\u0e38\u0e19\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d",[h.param('name',this.props.peerName)]);break;case l.NO_VIDEO_TRACKS:n=h._("\u0e40\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e15\u0e48\u0e2d\u0e01\u0e25\u0e49\u0e2d\u0e07\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e41\u0e25\u0e49\u0e27\u0e23\u0e35\u0e40\u0e1f\u0e23\u0e0a\u0e40\u0e1e\u0e08\u0e19\u0e31\u0e49\u0e19\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e1b\u0e34\u0e14\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d \u0e2b\u0e32\u0e01\u0e01\u0e25\u0e49\u0e2d\u0e07\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e40\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e15\u0e48\u0e2d\u0e2d\u0e22\u0e39\u0e48\u0e41\u0e25\u0e49\u0e27 \u0e43\u0e2b\u0e49\u0e25\u0e2d\u0e07\u0e23\u0e35\u0e2a\u0e15\u0e32\u0e23\u0e4c\u0e17\u0e40\u0e1a\u0e23\u0e32\u0e27\u0e4c\u0e40\u0e0b\u0e2d\u0e23\u0e4c\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13");break;case l.VIDEO_AUTO_DISABLED:n=h._("\u0e1e\u0e31\u0e01\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d\u0e44\u0e27\u0e49\u0e40\u0e19\u0e37\u0e48\u0e2d\u0e07\u0e08\u0e32\u0e01\u0e2a\u0e31\u0e0d\u0e0d\u0e32\u0e13\u0e01\u0e32\u0e23\u0e40\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e15\u0e48\u0e2d\u0e0a\u0e49\u0e32");break;case l.SCREENSHARING_UNAVAILABLE:n=this.props.isVCEndpointCall?h._("Screen sharing is not currently available for Messenger to room calls."):h._("\u0e01\u0e32\u0e23\u0e41\u0e0a\u0e23\u0e4c\u0e2b\u0e19\u0e49\u0e32\u0e08\u0e2d\u0e16\u0e39\u0e01\u0e1b\u0e34\u0e14\u0e01\u0e32\u0e23\u0e17\u0e33\u0e07\u0e32\u0e19\u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e42\u0e17\u0e23\u0e19\u0e35\u0e49\u0e40\u0e19\u0e37\u0e48\u0e2d\u0e07\u0e08\u0e32\u0e01\u0e2d\u0e38\u0e1b\u0e01\u0e23\u0e13\u0e4c\u0e02\u0e2d\u0e07 {name} \u0e44\u0e21\u0e48\u0e23\u0e2d\u0e07\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e41\u0e0a\u0e23\u0e4c\u0e2b\u0e19\u0e49\u0e32\u0e08\u0e2d",[h.param('name',this.props.peerName)]);break;case l.PEER_IS_SHARING_SCREEN:n=h._("{name} \u0e01\u0e33\u0e25\u0e31\u0e07\u0e41\u0e0a\u0e23\u0e4c\u0e2b\u0e19\u0e49\u0e32\u0e08\u0e2d\u0e02\u0e2d\u0e07\u0e40\u0e02\u0e32 \u0e04\u0e38\u0e13\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e41\u0e0a\u0e23\u0e4c\u0e2b\u0e19\u0e49\u0e32\u0e08\u0e2d\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e44\u0e14\u0e49\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e40\u0e02\u0e32\u0e2b\u0e22\u0e38\u0e14\u0e41\u0e0a\u0e23\u0e4c",[h.param('name',this.props.peerName)]);break;case l.IS_AUDIO_CALL:n=h._("Screen sharing is only available for video calls.");break;}return c('React').createElement(c('XUIContextualDialogBody.react'),{className:this.props.className},n)};m.prototype.$FBRTCCallControlPopover2=function(){var n={alignment:'left',behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerFadeOnShow:c('LayerFadeOnShow')},contextRef:function(){return this.props.reference}.bind(this),hoverContextRef:function(){return this.props.reference}.bind(this),position:'above',shown:false,width:this.props.width};return n};function m(){i.apply(this,arguments)}m.Types=l;m.propTypes={reason:k.number.isRequired,peerName:k.string.isRequired,isVCEndpointCall:k.bool,reference:k.object.isRequired,width:k.number.isRequired};f.exports=m}),null);
__d('FBRTCCallTimer.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PureComponent;h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={secondsElapsed:Math.floor(Date.now()/1000)-this.props.start},this.$FBRTCCallTimer2=function(){this.setState({secondsElapsed:Math.floor(Date.now()/1000)-this.props.start})}.bind(this),m}k.prototype.componentDidMount=function(){this.$FBRTCCallTimer1=setInterval(this.$FBRTCCallTimer2,1000)};k.prototype.componentWillUnmount=function(){clearInterval(this.$FBRTCCallTimer1)};k.prototype.render=function(){var l=this.state.secondsElapsed;return c('React').createElement('span',null,l>=3600?('0'+Math.floor(l/3600)).slice(-2)+':':'',('0'+Math.floor(l%3600/60)).slice(-2),':',('0'+l%60).slice(-2))};f.exports=k}),null);
__d('FBRTCVideo.react',['cx','FBRTCStreamWrapper','FBRTCUtils','React','ReactDOM','joinClasses','shallowEqual'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=c('React').Component;i=babelHelpers.inherits(m,l);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={currentStream:null},this.streamListener=null,o}m.prototype.componentWillReceiveProps=function(n){var o=n.stream;if(o!==this.props.stream){if(this.streamListener)this.streamListener.remove();this.streamListener=o?o.addListener('streamStarted',function(){return this.$FBRTCVideo1()}.bind(this)):null}};m.prototype.shouldComponentUpdate=function(n){return !c('shallowEqual')(this.props,n)||this.$FBRTCVideo2(n)};m.prototype.$FBRTCVideo2=function(n){var o=n.stream,p=o?o.getStream():null;return p!==this.state.currentStream};m.prototype.render=function(){return c('React').createElement('video',{className:c('joinClasses')(this.props.className,"_1yvx"),autoPlay:true,muted:this.props.muted,onContextMenu:function n(o){return o.preventDefault()},onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onMouseMove:this.props.onMouseMove,onTouchStart:this.props.onTouchStart,onTouchEnd:this.props.onTouchEnd,onTouchMove:this.props.onTouchMove})};m.prototype.componentDidMount=function(){this.$FBRTCVideo3();this.$FBRTCVideo1()};m.prototype.componentDidUpdate=function(n){if(this.$FBRTCVideo2(n)||n.mediaStream!==this.props.mediaStream)this.$FBRTCVideo3();if(n.audioSinkID!==this.props.audioSinkID)this.$FBRTCVideo1();};m.prototype.$FBRTCVideo3=function(){var n=this.props,o=n.stream,p=n.mediaStream,q=c('ReactDOM').findDOMNode(this);if(q)if(o){o.attachToVideoTag(q);this.setState({currentStream:o.getStream()})}else if(p)c('FBRTCUtils').attachMediaStream(q,p);};m.prototype.$FBRTCVideo1=function(){var n=this.props.audioSinkID,o=c('ReactDOM').findDOMNode(this);if(n&&o&&o.setSinkId)o.setSinkId(n);};m.defaultProps={muted:false};m.propTypes={audioSinkID:k.string,className:k.string,mediaStream:k.any,muted:k.bool,stream:k.instanceOf(c('FBRTCStreamWrapper'))};f.exports=m}),null);
__d('RTCGroupCallDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationDispatcher'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:true})}),null);
__d("RTCCallActionTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({INCOMING_CALL_SUCCESS:"INCOMING_CALL_SUCCESS",RESET:"RESET",REMOTE_VIDEO_MUTED:"REMOTE_VIDEO_MUTED",REMOTE_VIDEO_UNMUTED:"REMOTE_VIDEO_UNMUTED"})}),null);
__d("RTCGroupCallActionTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CALL:"CALL",CALL_SUCCESS:"CALL_SUCCESS",CALL_ERROR:"CALL_ERROR",INIT:"INIT",WAIT_FOR_USER_INPUT:"WAIT_FOR_USER_INPUT",SET_CALL_SUMMARY:"SET_CALL_SUMMARY",SET_MW_CALL_TYPE:"SET_MW_CALL_TYPE",SET_LAYOUT:"SET_LAYOUT",SET_DOMINANT_SPEAKER:"SET_DOMINANT_SPEAKER",SET_PINNED_SPEAKER:"SET_PINNED_SPEAKER",SET_USE_DOMINANT_SPEAKE_VIEW:"SET_USE_DOMINANT_SPEAKE_VIEW",SET_GRID_VIEW:"SET_GRID_VIEW",SET_STRIP_VIEW:"SET_STRIP_VIEW",INIT_THREAD:"INIT_THREAD",ON_PARTICIPANT_LEFT:"ON_PARTICIPANT_LEFT",ON_PARTICIPANTS_ADDED:"ON_PARTICIPANTS_ADDED",ADD_PARTICIPANTS_TO_RING:"ADD_PARTICIPANTS_TO_RING",JOIN:"JOIN",JOIN_SUCCESS:"JOIN_SUCCESS",JOIN_ERROR:"JOIN_ERROR",HANGUP:"HANGUP",HANGUP_SUCCESS:"HANGUP_SUCCESS",HANGUP_ERROR:"HANGUP_ERROR",ON_CONFERENCE_STATE:"ON_CONFERENCE_STATE",DISMISS:"DISMISS",END_CALL:"END_CALL",ON_JOIN_REQUEST_SENT:"ON_JOIN_REQUEST_SENT",ON_JOIN_RESPONSE:"ON_JOIN_RESPONSE",ON_SERVER_MEDIA_UPDATE_SUCCESS:"ON_SERVER_MEDIA_UPDATE_SUCCESS",ON_CLIENT_MEDIA_UPDATE_RESPONSE:"ON_CLIENT_MEDIA_UPDATE_RESPONSE",INIT_LOCAL_USER:"INIT_LOCAL_USER",INIT_REMOTE_USERS:"INIT_REMOTE_USERS",ADD_REMOTE_STREAM:"ADD_REMOTE_STREAM",REMOVE_REMOTE_STREAM:"REMOVE_REMOTE_STREAM",REMOVE_ALL_REMOTE_STREAMS:"REMOVE_ALL_REMOTE_STREAMS",ADD_REMOTE_TRACK:"ADD_REMOTE_TRACK",REMOVE_REMOTE_TRACK:"REMOVE_REMOTE_TRACK",AUDIO_MUTED:"AUDIO_MUTED",AUDIO_UNMUTED:"AUDIO_UNMUTED",VIDEO_MUTED:"VIDEO_MUTED",VIDEO_UNMUTED:"VIDEO_UNMUTED",SELF_VIEW_COLLAPSED:"SELF_VIEW_COLLAPSED",SELF_VIEW_UNCOLLAPSED:"SELF_VIEW_UNCOLLAPSED",ADD_LOCAL_STREAM:"ADD_LOCAL_STREAM",REMOVE_LOCAL_STREAM:"REMOVE_LOCAL_STREAM",REPLACE_LOCAL_STREAM:"REPLACE_LOCAL_STREAM",REMOVE_ALL_LOCAL_STREAMS:"REMOVE_ALL_LOCAL_STREAMS",ADD_LOCAL_SCREEN_STREAM:"ADD_LOCAL_SCREEN_STREAM",REMOVE_LOCAL_SCREEN_STREAM:"REMOVE_LOCAL_SCREEN_STREAM",REMOVE_ALL_LOCAL_SCREEN_STREAMS:"REMOVE_ALL_LOCAL_SCREEN_STREAMS",ADD_REMOTE_SCREEN_STREAM:"ADD_REMOTE_SCREEN_STREAM",REMOVE_REMOTE_SCREEN_STREAM:"REMOVE_REMOTE_SCREEN_STREAM",TOGGLE_REMOTE_STREAM:"TOGGLE_REMOTE_STREAM",SUBMIT_RATING:"SUBMIT_RATING",SUBMIT_FEEDBACK:"SUBMIT_FEEDBACK",RATING_SHOWN:"RATING_SHOWN",FEEDBACK_SHOWN:"FEEDBACK_SHOWN"})}),null);
__d('RTCCallActions',['RTCCallActionTypes','RTCGroupCallActionTypes','RTCGroupCallDispatcher','RTCUtils','emptyFunction','mixInEventEmitter'],(function a(b,c,d,e,f,g){'use strict';var h={addListener:c('emptyFunction'),emit:c('emptyFunction'),initialize:function i(j,k,l,m,n){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').INIT,conferenceName:k,callID:m,serverInfoData:l,protocol:j,callTrigger:n})},reset:function i(j){c('RTCGroupCallDispatcher').dispatch({type:c('RTCCallActionTypes').RESET,conferenceName:j})},setCallSummary:function i(j){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').SET_CALL_SUMMARY,callSummary:j})},call:function i(j,k){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').CALL,usersToRing:j,peerConnection:k})},callSuccess:function i(){var j=arguments.length<=0||arguments[0]===undefined?false:arguments[0];c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').CALL_SUCCESS,connected:j})},incomingCallSuccess:function i(){c('RTCGroupCallDispatcher').dispatch({type:c('RTCCallActionTypes').INCOMING_CALL_SUCCESS})},callError:function i(j){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').CALL_ERROR,endCallReason:c('RTCUtils').endCallReasonFromResponseStatusCode(j),endCallSubreason:'Call error: '+(j||0)})},hangupSuccess:function i(){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').HANGUP_SUCCESS})},hangupError:function i(j){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').HANGUP_ERROR,error:j})},join:function i(j){h.call([],j)},hangup:function i(j,k){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').HANGUP,hangupReason:j,detailedReasonString:k,endCallReason:c('RTCUtils').endCallReasonFromHangupReason(j)})},initLocalUser:function i(j){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').INIT_LOCAL_USER,localUser:j})},initRemoteUsers:function i(j){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').INIT_REMOTE_USERS,remoteUsers:j})},addLocalStream:function i(j){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').ADD_LOCAL_STREAM,stream:j})},removeLocalStream:function i(j){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').REMOVE_LOCAL_STREAM,stream:j})},replaceLocalStream:function i(j,k){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').REPLACE_LOCAL_STREAM,oldStream:j,newStream:k})},removeAllLocalStreams:function i(){var j=arguments.length<=0||arguments[0]===undefined?false:arguments[0];c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').REMOVE_ALL_LOCAL_STREAMS,stopStreams:j})},removeAllLocalScreenStreams:function i(){var j=arguments.length<=0||arguments[0]===undefined?false:arguments[0];c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').REMOVE_ALL_LOCAL_SCREEN_STREAMS,stopStreams:j})},addRemoteStream:function i(j,k){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').ADD_REMOTE_STREAM,stream:j,userID:k})},removeRemoteStream:function i(j,k){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').REMOVE_REMOTE_STREAM,stream:j,userID:k})},removeAllRemoteStreams:function i(j){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').REMOVE_ALL_REMOTE_STREAMS,userID:j})},addRemoteTrack:function i(j,k){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').ADD_REMOTE_TRACK,stream:j,track:k})},removeRemoteTrack:function i(j,k){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').REMOVE_REMOTE_TRACK,stream:j,track:k})},addLocalScreenStream:function i(j){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').ADD_LOCAL_SCREEN_STREAM,stream:j})},removeLocalScreenStream:function i(j){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').REMOVE_LOCAL_SCREEN_STREAM,stream:j})},addRemoteScreenStream:function i(j,k){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').ADD_REMOTE_SCREEN_STREAM,stream:j,userID:k})},removeRemoteScreenStream:function i(j,k){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').REMOVE_REMOTE_SCREEN_STREAM,stream:j,userID:k})},endCall:function i(j,k){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').END_CALL,endCallReason:j,endCallSubreason:k})},waitForUserInput:function i(){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').WAIT_FOR_USER_INPUT})},toggleMuteAudio:function i(j){c('RTCGroupCallDispatcher').dispatch({type:j?c('RTCGroupCallActionTypes').AUDIO_UNMUTED:c('RTCGroupCallActionTypes').AUDIO_MUTED})},toggleMuteVideo:function i(j){c('RTCGroupCallDispatcher').dispatch({type:j?c('RTCGroupCallActionTypes').VIDEO_UNMUTED:c('RTCGroupCallActionTypes').VIDEO_MUTED})},toggleMuteRemoteVideo:function i(j,k){c('RTCGroupCallDispatcher').dispatch({type:j?c('RTCCallActionTypes').REMOTE_VIDEO_MUTED:c('RTCCallActionTypes').REMOTE_VIDEO_UNMUTED,userID:k})},toggleSelfView:function i(j){c('RTCGroupCallDispatcher').dispatch({type:j?c('RTCGroupCallActionTypes').SELF_VIEW_COLLAPSED:c('RTCGroupCallActionTypes').SELF_VIEW_UNCOLLAPSED})},submitRating:function i(j){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').SUBMIT_RATING,rating:j})},submitFeedback:function i(j){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').SUBMIT_FEEDBACK,feedback:j})},ratingShown:function i(){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').RATING_SHOWN})},feedbackShown:function i(){c('RTCGroupCallDispatcher').dispatch({type:c('RTCGroupCallActionTypes').FEEDBACK_SHOWN})}};c('mixInEventEmitter')(h,{onIceConnectionStateChange:true});f.exports=h}),null);
__d('RTCSettingsMediaDeviceSelector.react',['fbt','React','XUISingleSelector.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('XUISingleSelector.react').Option,j=function m(n){var o=n.devices,p=n.defaultValue,q=babelHelpers.objectWithoutProperties(n,['devices','defaultValue']);return o.length>0?c('React').createElement(c('XUISingleSelector.react'),babelHelpers['extends']({defaultValue:p||o[0].deviceId},q),l(o)):c('React').createElement(c('XUISingleSelector.react'),babelHelpers['extends']({},q,{disabled:true}),c('React').createElement(i,{value:null},'---'))},k={videoinput:'Camera',audioinput:'Microphone',audiooutput:'Audio Output'};function l(m){var n=0;return m.map(function(o){var p=o.label?o.label:h._({"Camera":"\u0e01\u0e25\u0e49\u0e2d\u0e07 {number}","Microphone":"\u0e44\u0e21\u0e42\u0e04\u0e23\u0e42\u0e1f\u0e19 {number}","Audio Output":"\u0e40\u0e2a\u0e35\u0e22\u0e07\u0e2d\u0e2d\u0e01 {number}"},[h['enum'](k[o.kind],{Camera:'Camera',Microphone:'Microphone','Audio Output':'Audio Output'}),h.param('number',++n)]);return c('React').createElement(i,{value:o.deviceId,key:o.deviceId},p)})}f.exports=j}),null);
__d("CollabCallMessengerBrowserEventEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CALL_START_TRY:"call: try",CALL_PROCESS_STARTED:"call: start process",CALL_CONNECTED:"call: connected",CALL_ENDED:"call: ended",CONNECTION_INFO:"connection info",TURN_CREDENTIALS_RECEIVED:"TURN credentials received",HANGUP_CALL_ID_MISSMATCH:"hangup callID missmatch",CONNECTION_RECOVERY:"connection recovery",OFFER_ACCEPTED:"offer accepted",OFFER_IGNORED:"offer ignored",RENEGOTIATION:"offer renegotiation",LOCAL_STREAM_SET:"local stream: set",LOCAL_STREAM_READY:"local stream: ready",LOCAL_STREAM_STARTED:"local stream: started",LOCAL_STREAM_TRACKS_CHANGED:"local stream: tracks changed",LOCAL_SCREEN_STREAM_SET:"screen stream: set",SCREEN_SHARING_CANCELLED:"screen sharing: cancelled",SCREEN_SHARING_DIALOG_CANCEL:"screen sharing: dialog cancel",SCREEN_SHARING_DIALOG_SUCCESS:"screen sharing: dialog success",SCREEN_SHARING_EXT_DIALOG:"screen sharing: extension install dialog",SCREEN_SHARING_EXT_LINK:"screen sharing: user clicked on install link",SCREEN_SHARING_NOT_SUPPORTED:"screen sharing: not supported",SCREEN_SHARING_TOGGLED:"screen sharing: toggled",REMOTE_STREAM_SET:"remote stream: set",REMOTE_STREAM_STARTED:"remote stream: started",REMOTE_STREAM_TRACKS_CHANGED:"remote stream: tracks changed",REMOTE_STREAM_ADDED:"remote stream: added",REMOTE_STREAM_MUTE_TOGGLED:"remote steam: mute toggled",REMOTE_STREAM_REMOVED:"remote stream: removed",FAIL_BROWSER_NOT_SUPPORTED:"browser not supported",CALL_CONTROLLER_INIT:"call controller init",REQUEST_USER_MEDIA:"request user media",WSS_START_TRY:"wss: try",WSS_CONNECTED:"wss: connected",WSS_ENDED:"wss: ended",ICE_CONNECTION_STATE_CHANGE:"ICE connection state change",ICE_GATHERING_STATE_CHANGE:"ICE gathering state change",ICE_CANDIDATE_ERROR:"ICE candidate error",USER_SETTINGS_CHANGED:"user settings change",RTC_ERROR:"RTC error",MESSAGE_SENT:"message sent",MESSAGE_RECEIVED:"message received",SDP_UPDATE:"SDP update"})}),null);
__d("ScreenSharingWebDriverIDs",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SHARE_SCREEN_BUTTON:"shareScreenButton",INSTALL_EXT_DIALOG:"install_extension_dialog"})}),null);
__d("VideoCallWebDriverIDs",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({END_CALL_BUTTON:"endCallButton",FULL_SCREEN_BUTTON:"fullScreenButton",INCALL_VIDEO_CONTAINER:"incallVideoContainer",STAR_RATING_VIEW:"starRatingView",TOGGLE_AUDIO_BUTTON:"toggleAudioButton",TOGGLE_VIDEO_BUTTON:"toggleVideoButton"})}),null);
__d("XScreenSharingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videocall\/screen_sharing\/",{peer_id:{type:"FBID",required:true}})}),null);