if (self.CavalryLogger) { CavalryLogger.start_js(["jBayo"]); }

__d("UFILiveVideoAnnouncementActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CTA_CLICK:"cta_click",CTA_STATE_UPDATE_SUCCESS:"cta_state_update_success"})}),null);
__d('UFILiveVideoAnnouncementAction',['UFIDispatcherBase','UFILiveVideoAnnouncementActionType'],(function a(b,c,d,e,f,g){'use strict';var h={clickCTA:function i(j,k){c('UFIDispatcherBase').dispatch({type:c('UFILiveVideoAnnouncementActionType').CTA_CLICK,comment:j,ctaNewState:k,ftentidentifier:j.id,instanceID:j.id})},updateCTAStateSuccess:function i(j,k){c('UFIDispatcherBase').dispatch({type:c('UFILiveVideoAnnouncementActionType').CTA_STATE_UPDATE_SUCCESS,comment:j,ctaNewState:k,ftentidentifier:j.id,instanceID:j.id})}};f.exports=h}),null);
__d("LiveVideoAnnouncementCTAType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:"none",LIVE_SUBSCRIBE:"live_subscribe",FOLLOW:"follow",PAGE_LIKE:"page_like",INVITE_GUEST:"invite_guest"})}),null);
__d('LiveVideoCTAFooter',['Arbiter','CSS','Event','SubscribeButton'],(function a(b,c,d,e,f,g){var h={SUBSCRIBED:'subscribed',UNSUBSCRIBED:'unsubscribed',init:function i(j,k,l,m,n,o){c('Arbiter').subscribe(c('SubscribeButton').SUBSCRIBED,function(p,q){if(n==q.profile_id&&o==q.contextID)c('CSS').show(j);});c('Arbiter').subscribe(c('SubscribeButton').UNSUBSCRIBED,function(p,q){if(n==q.profile_id&&o==q.contextID)c('CSS').hide(j);});c('Event').listen(l,'click',function(){c('Arbiter').inform(h.SUBSCRIBED,{profileID:n})});c('Event').listen(m,'click',function(){c('Arbiter').inform(h.UNSUBSCRIBED,{profileID:n})});c('Arbiter').subscribe(h.SUBSCRIBED,function(p,q){if(n==q.profileID)k.swap();});c('Arbiter').subscribe(h.UNSUBSCRIBED,function(p,q){if(n==q.profileID)k.unswap();})}};f.exports=h}),null);
__d("VideoBroadcastSubscriptionStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ALL:0,SOME:1,OFF:2})}),null);
__d("XLiveSubscriptionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/live\/subscribe\/",{video_id:{type:"Int"},action:{type:"Enum",enumType:1},subscription_surface:{type:"Enum",defaultValue:"www_video_overlay",enumType:1}})}),null);
__d("XVideoChannelFollowController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video_channel\/follow\/",{channel_id:{type:"FBID"},follow:{type:"Bool",defaultValue:false},surface:{type:"Enum",enumType:1},video_id:{type:"FBID"}})}),null);
__d('UFILiveVideoAnnouncementDataManager',['Arbiter','AsyncRequest','LiveVideoAnnouncementCTAType','LiveVideoCTAFooter','SubscribeButton','UFILiveVideoAnnouncementAction','VideoBroadcastSubscriptionAction','VideoBroadcastSubscriptionStatus','VideoChannelFollowSurfaces','XLiveSubscriptionController','XVideoChannelFollowController'],(function a(b,c,d,e,f,g){'use strict';function h(k,l){var event=void 0;if(l){event=c('SubscribeButton').SUBSCRIBED}else event=c('SubscribeButton').UNSUBSCRIBED;c('Arbiter').inform(event,{profile_id:k.targetID,focusOnClick:false})}function i(k,l){var event=void 0;if(l){event=c('LiveVideoCTAFooter').SUBSCRIBED}else event=c('LiveVideoCTAFooter').UNSUBSCRIBED;c('Arbiter').inform(event,{profileID:k.targetID})}var j={updateCTAState:function k(l,m){var n=void 0,o=void 0;switch(l.ctaAction){case c('LiveVideoAnnouncementCTAType').FOLLOW:n=c('XVideoChannelFollowController').getURIBuilder().getURI();o={channel_id:l.targetID,follow:m,surface:c('VideoChannelFollowSurfaces').IN_LIVE_EXPERIENCE,video_id:l.ftentidentifier};break;case c('LiveVideoAnnouncementCTAType').LIVE_SUBSCRIBE:n=c('XLiveSubscriptionController').getURIBuilder().getURI();var p=void 0;if(m){p=c('VideoBroadcastSubscriptionAction').SUBSCRIBE}else p=l.broadcastSubscriptionStatus===c('VideoBroadcastSubscriptionStatus').OFF?c('VideoBroadcastSubscriptionAction').UNSUBSCRIBE:c('VideoBroadcastSubscriptionAction').SUBSCRIBE_SUGGESTED;o={action:p,video_id:l.ftentidentifier};break;case c('LiveVideoAnnouncementCTAType').PAGE_LIKE:n='/ajax/pages/like_link';o={page_id:l.targetID,like:m};break;}new (c('AsyncRequest'))().setURI(n).setData(o).setHandler(function(q){var r=q.payload;if(!r||r&&r.success){c('UFILiveVideoAnnouncementAction').updateCTAStateSuccess(l,m);if(l.ctaAction===c('LiveVideoAnnouncementCTAType').FOLLOW){h(l,m)}else if(l.ctaAction===c('LiveVideoAnnouncementCTAType').LIVE_SUBSCRIBE)i(l,m);}}).send()}};f.exports=j}),null);
__d('UFILiveVideoAnnouncementCTAStateStore',['FluxMapStore','UFIDispatcherBase','UFILiveVideoAnnouncementActionType','UFILiveVideoAnnouncementDataManager'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxMapStore'));i=h&&h.prototype;j.prototype.reduce=function(k,l){switch(l.type){case c('UFILiveVideoAnnouncementActionType').CTA_CLICK:c('UFILiveVideoAnnouncementDataManager').updateCTAState(l.comment,l.ctaNewState);return k;case c('UFILiveVideoAnnouncementActionType').CTA_STATE_UPDATE_SUCCESS:return k.set(l.comment.id,l.ctaNewState);default:return k;}};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFILiveVideoAnnouncementCTA.react',['ix','cx','Image.react','LiveVideoAnnouncementCTAType','LiveVideoAnnouncementGlyph','React','UFILiveVideoAnnouncementAction','XUIButton.react','fbglyph'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$UFILiveVideoAnnouncementCTA2=function(event){event.preventDefault();var r=this.props.comment,s=!this.props.ctaState;c('UFILiveVideoAnnouncementAction').clickCTA(r,s)}.bind(this),n}l.prototype.render=function(){var m=this.props.comment;if(m.ctaAction===c('LiveVideoAnnouncementCTAType').NONE)return null;var n=this.$UFILiveVideoAnnouncementCTA1(),o=this.props.ctaState&&n?c('React').createElement(c('Image.react'),{src:n}):null,p=this.props.ctaState?m.ctaTextOn:m.ctaTextOff;return c('React').createElement(c('XUIButton.react'),{className:"_3-8w",image:o,label:p,use:'default',onClick:this.$UFILiveVideoAnnouncementCTA2})};l.prototype.$UFILiveVideoAnnouncementCTA1=function(){switch(this.props.comment.ctaGlyphName){case c('LiveVideoAnnouncementGlyph').CHECKMARK:return h("124180");case c('LiveVideoAnnouncementGlyph').LIKE:return h("124770");default:return null;}};f.exports=l}),null);
__d('UFILiveVideoAnnouncementCTAContainer.react',['Arbiter','FluxContainer','LiveVideoAnnouncementCTAType','React','SubscribeButton','SubscriptionsHandler','UFILiveVideoAnnouncementAction','UFILiveVideoAnnouncementCTA.react','UFILiveVideoAnnouncementCTAStateStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){return [c('UFILiveVideoAnnouncementCTAStateStore')]};j.calculateState=function(k,l){var m=c('UFILiveVideoAnnouncementCTAStateStore').get(l.comment.id);if(m==null)m=l.comment.ctaState;return {ctaState:m}};j.prototype.componentDidMount=function(){var k=this.props.comment;if(k.ctaAction!==c('LiveVideoAnnouncementCTAType').FOLLOW)return;this.$UFILiveVideoAnnouncementCTAContainer1=new (c('SubscriptionsHandler'))();this.$UFILiveVideoAnnouncementCTAContainer1.addSubscriptions(c('Arbiter').subscribe(c('SubscribeButton').SUBSCRIBED,function(l,m){if(k.targetID==m.profile_id)c('UFILiveVideoAnnouncementAction').updateCTAStateSuccess(k,true);}),c('Arbiter').subscribe(c('SubscribeButton').UNSUBSCRIBED,function(l,m){if(k.targetID==m.profile_id)c('UFILiveVideoAnnouncementAction').updateCTAStateSuccess(k,false);}))};j.prototype.componentWillUnmount=function(){if(this.$UFILiveVideoAnnouncementCTAContainer1)this.$UFILiveVideoAnnouncementCTAContainer1.release();};j.prototype.render=function(){return c('React').createElement(c('UFILiveVideoAnnouncementCTA.react'),{comment:this.props.comment,ctaState:this.state.ctaState})};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j,{withProps:true})}),null);