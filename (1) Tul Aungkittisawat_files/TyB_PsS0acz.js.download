if (self.CavalryLogger) { CavalryLogger.start_js(["RumBn"]); }

__d('SphericalMediaViewportAnimation',['easeInOutInterpolate','requestAnimationFrame','SphericalMediaViewActions'],(function a(b,c,d,e,f,g){'use strict';var h=c('SphericalMediaViewActions').updateViewportAndFOV,i=c('SphericalMediaViewActions').startAnimating,j=c('SphericalMediaViewActions').stopAnimating,k=1000,l={moveTo:function m(n){return function(o,p){var q=p(),r=q.view;if(r.isAnimating)return;o(i());var s=Date.now(),t=n.yaw-r.yaw;if(Math.abs(t)>180)t+=t>0?-360:360;var u=null,v=null,w=null,x=function y(z){var aa=p(),ba=aa.view;if(!ba.isAnimating)return;var ca=Date.now();if(ca-s>k||u!=null&&u!=ba.pitch||v!=null&&v!=ba.yaw||w!=null&&w!=ba.fov){o(j());return}c('requestAnimationFrame')(function(){y(z)});var da=c('easeInOutInterpolate')((ca-s)/k),ea=z.deltaPitch*da+z.startPitch,fa=z.deltaYaw*da+z.startYaw,ga=z.deltaFov*da+z.startFov;o(h(fa,ea,ga));u=ea;v=fa;w=ga};c('requestAnimationFrame')(function(){x({startYaw:r.yaw,deltaYaw:t,startPitch:r.pitch,deltaPitch:n.pitch-r.pitch,startFov:r.fov,deltaFov:n.fov-r.fov})})}}};f.exports=l}),null);
__d('SphericalPhotoHeadingIndicator.redux',['FullScreen','SphericalMediaHeadingIndicator.react','SphericalPhotoConfig','SphericalPhotoProjectionUtils','ReactRedux','SphericalMediaBaseActions','SphericalMediaViewportAnimation'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('ReactRedux').connect,k=c('SphericalMediaBaseActions').tapHeadingIndicator,l=c('SphericalMediaViewportAnimation').moveTo;h=babelHelpers.inherits(m,c('SphericalMediaHeadingIndicator.react'));i=h&&h.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=i.constructor).call.apply(o,[this].concat(r)),this.$SphericalPhotoHeadingIndicator1=function(){this.draw(this.__getDrawData())}.bind(this),p}m.prototype.componentDidMount=function(){i.componentDidMount.call(this);this.props.viewStore.subscribe(this.$SphericalPhotoHeadingIndicator1)};m.prototype.__onClick=function(event){this.props.dispatch(k());var o=this.props.initialFov;if(this.props.showNewPhotoRenderer&&o>179){var p=this.props,q=p.aspectRatio,r=p.partialLeftDegrees,s=p.partialRightDegrees,t=p.partialTopDegrees,u=p.partialBottomDegrees;o=c('SphericalPhotoProjectionUtils').getMaxVfov({partialLeftDegrees:r,partialRightDegrees:s,partialTopDegrees:t,partialBottomDegrees:u},q)}this.props.viewStore.dispatch(l({fov:o,pitch:this.props.initialPitch,yaw:this.props.initialYaw}))};m.prototype.__getDrawData=function(){var o=this.props.viewStore.getState(),p=o.view;return {fov:p.fov,initialYaw:this.props.initialYaw,yaw:p.yaw}};m.__subClassMethods={__onClick:true,__getDrawData:true};var n=function o(p){return {aspectRatio:p.base.aspectRatio,initialFov:p.base.initialFov,initialPitch:p.base.initialPitch,initialYaw:p.base.initialYaw,isActive:p.base.isRendererActive&&p.base.isRendererSetup||p.base.showFallbackUI,viewStore:p.base.viewStore,isFullScreen:c('FullScreen').isFullScreen(),isPanning:p.base.isPanning,partialLeftDegrees:p.base.partialLeftDegrees,partialRightDegrees:p.base.partialRightDegrees,partialTopDegrees:p.base.partialTopDegrees,partialBottomDegrees:p.base.partialBottomDegrees,showNewPhotoRenderer:p.base.tiledSphericalConfig.useTiledRenderer&&c('SphericalPhotoConfig').show_new_renderer}};f.exports=j(n)(m)}),null);