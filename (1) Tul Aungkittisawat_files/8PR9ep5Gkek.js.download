if (self.CavalryLogger) { CavalryLogger.start_js(["axLxA"]); }

__d("FeedFundraiserToCharityAttachmentStyle",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BORDERLESS:"borderless",BOX:"box"})}),null);
__d('LiveInviteFriendsResultRow.react',['ix','cx','fbt','LiveVideoBroadcastActions','Image.react','InlineBlock.react','Layout.react','ProfileTile.react','React','XUIButton.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').Column,n=c('Layout.react').FillColumn;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(p){l.constructor.call(this,p);this.$LiveInviteFriendsResultRow1=function(event){c('LiveVideoBroadcastActions').inviteFriend({invitedFriendID:this.props.friendID,videoID:this.props.videoID})}.bind(this)}o.prototype.render=function(){var p=c('React').createElement(c('Image.react'),{src:h("113341")}),q=c('React').createElement(c('Image.react'),{src:h("112967")}),r=j._("\u0e40\u0e0a\u0e34\u0e0d\u0e41\u0e25\u0e49\u0e27"),s=this.props.friendInvited?c('React').createElement(c('XUIButton.react'),{className:"_3b8a",'data-hover':'tooltip','data-tooltip-content':r,disabled:true,image:q,label:r}):c('React').createElement(c('XUIButton.react'),{className:"_3b8a",image:p,label:j._("\u0e40\u0e0a\u0e34\u0e0d"),onClick:this.$LiveInviteFriendsResultRow1});return c('React').createElement(c('Layout.react'),null,c('React').createElement(m,{className:"_2kji"},c('React').createElement(c('ProfileTile.react'),{id:this.props.friendID,shouldShowProfileCardOnHover:false,size:32})),c('React').createElement(n,null,c('React').createElement(c('InlineBlock.react'),{alignv:'middle',height:56},this.props.friendName)),c('React').createElement(m,{className:"_3b8b"},c('React').createElement(c('InlineBlock.react'),{alignv:'middle',height:28},s)))};f.exports=o}),null);
__d('LiveInviteFriendsResultList.react',['cx','fbt','LiveInviteFriendsResultRow.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$LiveInviteFriendsResultList1=i._("\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e1c\u0e25\u0e25\u0e31\u0e1e\u0e18\u0e4c\u0e43\u0e14")}l.prototype.render=function(){if(this.props.friendList.length===0)return c('React').createElement('div',{className:"_12xf"},this.$LiveInviteFriendsResultList1);var m=this.props.friendList.map(function(n){return c('React').createElement('li',{className:"_2kjh",key:n.id},this.$LiveInviteFriendsResultList2(n))}.bind(this));return c('React').createElement('ul',{className:"_2kjg"},m)};l.prototype.$LiveInviteFriendsResultList2=function(m){var n=this.props.invitedFriendIDs.indexOf(m.id)>=0;return c('React').createElement(c('LiveInviteFriendsResultRow.react'),{friendID:m.id,friendInvited:n,friendName:m.name,videoID:this.props.videoID})};f.exports=l}),null);
__d('LiveVideoInviteFriendsDialog.react',['fbt','cx','LiveVideoBroadcastActions','CurrentUser','InlineBlock.react','FlexLayout.react','LiveInviteFriendsResultList.react','React','SearchableTextInput.react','WebAsyncSearchSource','XUIButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$LiveVideoInviteFriendsDialog1=new (c('WebAsyncSearchSource'))({bootstrapRequests:[{data:{filter:['user'],options:['friends_only'],viewer:c('CurrentUser').getID()},uri:'/ajax/typeahead/first_degree.php'}]})}l.prototype.$LiveVideoInviteFriendsDialog2=function(m){c('LiveVideoBroadcastActions').setInviteFriendsQuery(m.target.value)};l.prototype.$LiveVideoInviteFriendsDialog3=function(m){m=m.slice(0,25).filter(function(n){return n.getUniqueID()!==c('CurrentUser').getID()});c('LiveVideoBroadcastActions').setInviteFriendsSearchResults(m)};l.prototype.$LiveVideoInviteFriendsDialog4=function(){if(this.props.inviteFriendsQueryString==='')return this.props.inviteFriendsSuggestions;return this.props.inviteFriendsQueryResults.map(function(m){return {id:m.getUniqueID(),name:m.getTitle()}})};l.prototype.$LiveVideoInviteFriendsDialog5=function(){c('LiveVideoBroadcastActions').setInviteFriendsShown(false)};l.prototype.render=function(){var m=c('React').createElement('div',{className:"_ftk"},c('React').createElement(c('InlineBlock.react'),{alignv:'middle',className:"_4zd3",height:40},this.props.inviteFriendsTitle)),n=c('React').createElement('div',{className:"_ftl"},c('React').createElement(c('SearchableTextInput.react'),{className:"_4zd4",placeholder:this.props.placeholderText,queryString:this.props.inviteFriendsQueryString,ref:function t(u){if(u!=null)u.focusInput();},searchOnUpdate:true,searchSource:this.$LiveVideoInviteFriendsDialog1,onChange:this.$LiveVideoInviteFriendsDialog2,onEntriesFound:this.$LiveVideoInviteFriendsDialog3})),o=this.$LiveVideoInviteFriendsDialog4(),p=c('React').createElement(c('LiveInviteFriendsResultList.react'),{friendList:o,invitedFriendIDs:this.props.invitedFriendIDs,videoID:this.props.videoId}),q=c('React').createElement('div',{className:"_ftm"},p),r=c('React').createElement(c('XUIButton.react'),{label:h._("\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22"),size:'large',use:'confirm',onClick:this.$LiveVideoInviteFriendsDialog5}),s=c('React').createElement(c('FlexLayout.react'),{align:'center',className:"_fto",justify:'end'},c('React').createElement('div',{className:"_ftp"},r));return c('React').createElement('div',{className:"_1yda"},m,n,q,s)};f.exports=l}),null);
__d("LiveInviteNotifContext",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({API:"api",CHAT:"chat",WWW_UI:"www_ui",TEST:"test",UNKNOWN:"unknown"})}),null);
__d("LiveVideoInvitedFriendsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1399791376742292"};j.getQueryID=function(){"use strict";return "725846884272464"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d('LiveVideoInviteFriendsDataManager',['LiveVideoBroadcastActions','LiveVideoInvitedFriendsQueryWebGraphQLQuery','WebGraphQL','compactArray','idx'],(function a(b,c,d,e,f,g){'use strict';var h={fetchInvitedFriends:function i(j){c('WebGraphQL').exec(new (c('LiveVideoInvitedFriendsQueryWebGraphQLQuery'))({node_id:j})).done(function(k){var l,m=((l=k)!=null?(l=l.node)!=null?l.already_invited_live_viewers:l:l)||[],n=c('compactArray')(m.map(function(o){return o.id}));c('LiveVideoBroadcastActions').setInvitedFriends(n)})}};f.exports=h}),null);
__d("XLiveVideoInviteFriendsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/live_video\/invite_friends\/",{friend_ids:{type:"FBIDVector"},video_id:{type:"FBID"},source:{type:"Enum",defaultValue:"unknown",enumType:1}})}),null);
__d('LiveVideoInviteFriendsStore',['LiveVideoBroadcastConstants','AsyncRequest','LiveVideoBroadcastDispatcher','FluxMapStore','immutable','LiveInviteNotifContext','LiveVideoInviteFriendsDataManager','XLiveVideoInviteFriendsController'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('LiveVideoBroadcastConstants').ACTIONS;h=babelHelpers.inherits(k,c('FluxMapStore'));i=h&&h.prototype;k.prototype.getInitialState=function(){return c('immutable').Map({invitedFriendIDs:[],inviteFriendsQueryResults:[],inviteFriendsQueryString:'',inviteFriendsSuggestions:[],inviteFriendsShown:false})};k.prototype.reduce=function(l,m){switch(m.type){case j.INITIALIZE:l=this.getInitialState();break;case j.FINISH_BROADCAST_REQUEST:l=l.set('inviteFriendsShown',false);break;case j.SET_INVITE_FRIENDS_SHOWN:l=l.set('inviteFriendsShown',m.value);if(!m.value)l=l.set('inviteFriendsQueryResults',[]).set('inviteFriendsQueryString','');break;case j.SET_INVITE_FRIENDS_QUERY:l=l.set('inviteFriendsQueryString',m.value.inviteFriendsQueryString);break;case j.INVITE_FRIEND:var n=m.value.invitedFriendID,o=m.value.videoID,p=c('XLiveVideoInviteFriendsController').getURIBuilder().setFBID('video_id',o).setFBIDVector('friend_ids',[n]).setEnum('source',c('LiveInviteNotifContext').WWW_UI).getURI();new (c('AsyncRequest'))(p).setHandler(function(q){}).setErrorHandler(function(q){}).send();l=l.set('invitedFriendIDs',l.get('invitedFriendIDs').concat([n]));break;case j.SET_INVITE_FRIENDS_RESULTS:l=l.set('inviteFriendsQueryResults',m.value.results);break;case j.SET_INVITE_FRIENDS_SUGGESTIONS:l=l.set('inviteFriendsSuggestions',m.value.results);break;case j.FETCH_INVITED_FRIENDS:c('LiveVideoInviteFriendsDataManager').fetchInvitedFriends(m.value);break;case j.SET_INVITED_FRIENDS:l=l.set('invitedFriendIDs',l.get('invitedFriendIDs').concat(m.value.friendIds));break;default:break;}return l};function k(){h.apply(this,arguments)}f.exports=new k(c('LiveVideoBroadcastDispatcher'))}),null);
__d('LiveVideoInviteFriendsDialogContainer.react',['fbt','LiveVideoBroadcastActions','FluxContainer','LiveVideoBroadcastDispatcher','LiveVideoInviteFriendsDialog.react','LiveVideoInviteFriendsStore','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);c('LiveVideoBroadcastDispatcher').explicitlyRegisterStores([c('LiveVideoInviteFriendsStore')]);this.state={inviteFriendsQueryString:'',inviteFriendsQueryResults:[],invitedFriendIDs:[],inviteFriendsSuggestions:[],inviteFriendsShown:false};c('LiveVideoBroadcastActions').fetchInviteFriendsSuggestions();c('LiveVideoBroadcastActions').fetchInvitedFriends(this.props.videoId)}k.getStores=function(){return [c('LiveVideoInviteFriendsStore')]};k.calculateState=function(){var l=c('LiveVideoInviteFriendsStore').getState().toObject(),m=l.invitedFriendIDs,n=l.inviteFriendsQueryResults,o=l.inviteFriendsQueryString,p=l.inviteFriendsSuggestions,q=l.inviteFriendsShown;return {invitedFriendIDs:m,inviteFriendsQueryResults:n,inviteFriendsQueryString:o,inviteFriendsSuggestions:p,inviteFriendsShown:q}};k.prototype.componentWillUnmount=function(){c('LiveVideoBroadcastActions').setInviteFriendsShown(false)};k.prototype.render=function(){if(!this.state.inviteFriendsShown)return null;var l=h._("\u0e04\u0e49\u0e19\u0e2b\u0e32");return c('React').createElement(c('LiveVideoInviteFriendsDialog.react'),{inviteFriendsQueryResults:this.state.inviteFriendsQueryResults,inviteFriendsQueryString:this.state.inviteFriendsQueryString,inviteFriendsSuggestions:this.state.inviteFriendsSuggestions,inviteFriendsTitle:this.props.inviteFriendsTitle,invitedFriendIDs:this.state.invitedFriendIDs,placeholderText:l,videoId:this.props.videoId})};f.exports=c('FluxContainer').create(k)}),null);
__d("LiveVideoCheckCurrentlyWatchingViewersQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1380660238708407"};j.getQueryID=function(){"use strict";return "1459882240979983"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("LiveVideoCurrentlyWatchingEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({JOIN:"join",LEAVE:"leave"})}),null);
__d("LiveVideoCurrentlyWatchingSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1424207670935230",queryID:"749242881906644"})}),null);
__d('LiveVideoCurrentlyWatchingSubscription',['BaseGraphQLSubscription','LiveVideoCurrentlyWatchingSubscriptionWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/live_video_currently_watching_subscribe/video_id_'+j},_getQueryID:function i(){return c('LiveVideoCurrentlyWatchingSubscriptionWebGraphQLSubscription').getDocID()},_getQueryParameters:function i(j){return {data:JSON.stringify({client_subscription_id:c('uuid')(),video_id:j})}},_getSubscriptionCallName:function i(){return 'live_video_currently_watching_subscribe'}});f.exports=h}),null);
__d('UFILiveViewersRow.react',['ix','cx','Facepile.react','FlexLayout.react','Image.react','LeftFillRightFitLayout.react','LiveVideoBroadcastActions','ProfileBrowserLink','ProfileBrowserTypes','React','XUIButton.react','fbglyph'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=5,m=function p(q){var r=c('React').createElement(c('Image.react'),{src:h("113342")});return c('React').createElement(c('XUIButton.react'),{className:"_62ln",image:r,label:'Invite',labelIsHidden:true,size:'medium',onClick:q.onInviteFriendsButtonClick,type:'button'})},n=function p(q){if(!q.shouldShowInviteButton)return null;return c('React').createElement(c('FlexLayout.react'),{className:(!q.shouldScrollToRow?"_62lo":'')+(q.shouldScrollToRow?' '+"_1dkf":''),align:'center'},c('React').createElement(m,q),c('React').createElement(c('FlexLayout.react'),{className:"_62lp",align:'center'},q.inviteFriendsTitle))};j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;o.prototype.$UFILiveViewersRow1=function(){c('LiveVideoBroadcastActions').setInviteFriendsShown(true)};o.prototype.render=function(){var p=this.props.viewers;if(!p.length)return c('React').createElement(n,{shouldShowInviteButton:this.props.shouldShowInviteButton,onInviteFriendsButtonClick:this.$UFILiveViewersRow1,shouldScrollToRow:this.props.shouldScrollToRow,inviteFriendsTitle:this.props.inviteFriendsTitle});var q=p.length>l?p.slice(0,l-1):p,r=p.length>l?1+p.length-l:0,s=c('ProfileBrowserTypes').LIVE_VIDEO_VIEWERS,t={title:this.props.title,video_id:this.props.videoId},u=c('ProfileBrowserLink').constructDialogURI(s,t),v=c('ProfileBrowserLink').constructPageURI(s,t),w=c('React').createElement(c('Facepile.react'),{moreColor:'blue',moreCount:r,moreDialogLink:u.toString(),morePageLink:v.toString(),profiles:q,size:'medium'}),x=c('React').createElement('a',{ajaxify:u,href:v,rel:'dialog'},this.props.title);if(this.props.shouldShowInviteButton)return c('React').createElement(c('FlexLayout.react'),{className:(!this.props.shouldScrollToRow?"_62lo":'')+(this.props.shouldScrollToRow?' '+"_1dkf":''),align:'center'},c('React').createElement(m,{onInviteFriendsButtonClick:this.$UFILiveViewersRow1}),c('React').createElement(c('FlexLayout.react'),{className:"_3-99",align:'center'},w,c('React').createElement('div',{className:"_3-99"},x)));return c('React').createElement(c('LeftFillRightFitLayout.react'),{className:"_17ab"},c('React').createElement('div',{className:"_2z2j"},x),w)};function o(){j.apply(this,arguments)}f.exports=o}),null);
__d('VideoBroadcastWhosWatchingTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:VideoBroadcastWhosWatchingLoggerConfig',this.$VideoBroadcastWhosWatchingTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:VideoBroadcastWhosWatchingLoggerConfig',this.$VideoBroadcastWhosWatchingTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$VideoBroadcastWhosWatchingTypedLogger1={};return this};h.prototype.updateData=function(j){this.$VideoBroadcastWhosWatchingTypedLogger1=babelHelpers['extends']({},this.$VideoBroadcastWhosWatchingTypedLogger1,j);return this};h.prototype.setPollingExtra=function(j){this.$VideoBroadcastWhosWatchingTypedLogger1.polling_extra=c('GeneratedLoggerUtils').serializeVector(j);return this};h.prototype.setSubscriptionExtra=function(j){this.$VideoBroadcastWhosWatchingTypedLogger1.subscription_extra=c('GeneratedLoggerUtils').serializeVector(j);return this};h.prototype.setVideoID=function(j){this.$VideoBroadcastWhosWatchingTypedLogger1.video_id=j;return this};var i={polling_extra:true,subscription_extra:true,video_id:true};f.exports=h}),null);
__d('UFILiveViewersRowContainer.react',['AsyncRequest','LiveVideoCheckCurrentlyWatchingViewersQueryWebGraphQLQuery','LiveVideoCurrentlyWatchingEvent','LiveVideoCurrentlyWatchingSubscription','LiveVideoCurrentlyWatchingViewersQueryWebGraphQLQuery','Poller','React','UFILiveViewersRow.react','VideoBroadcastStatus','VideoBroadcastWhosWatchingTypedLogger'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=5,k=2000,l=20000,m=10000;h=babelHelpers.inherits(n,c('React').Component);i=h&&h.prototype;function n(o){i.constructor.call(this,o);this.state={viewers:[]};this.$UFILiveViewersRowContainer1=0;this.$UFILiveViewersRowContainer5=[];this.$UFILiveViewersRowContainer6=o.shouldSubscribe}n.prototype.componentWillMount=function(){if(this.$UFILiveViewersRowContainer6){this.$UFILiveViewersRowContainer7(this.props);this.$UFILiveViewersRowContainer8(this.props)}else this.$UFILiveViewersRowContainer9(this.props);};n.prototype.componentWillUnmount=function(){this.$UFILiveViewersRowContainer10();this.$UFILiveViewersRowContainer11()};n.prototype.componentWillReceiveProps=function(o){if(o.videoId!==this.props.videoId)if(this.$UFILiveViewersRowContainer6){this.$UFILiveViewersRowContainer7(o);this.$UFILiveViewersRowContainer8(o)}else this.$UFILiveViewersRowContainer9(o);};n.prototype.render=function(){return c('React').createElement(c('UFILiveViewersRow.react'),{title:this.props.title,videoId:this.props.videoId,viewers:this.state.viewers,shouldShowInviteButton:this.props.shouldShowInviteButton,shouldScrollToRow:this.props.shouldScrollToRow,inviteFriendsTitle:this.props.inviteFriendsTitle})};n.prototype.$UFILiveViewersRowContainer9=function(o){this.$UFILiveViewersRowContainer10();this.$UFILiveViewersRowContainer1=0;var p=c('LiveVideoCurrentlyWatchingViewersQueryWebGraphQLQuery').getURI({video_id:o.videoId});this.$UFILiveViewersRowContainer3=new (c('Poller'))({setupRequest:function(q){q.setURI(p).setHandler(function(r){return this.$UFILiveViewersRowContainer12(r)}.bind(this)).setErrorHandler(function(r){return this.$UFILiveViewersRowContainer13()}.bind(this))}.bind(this),interval:function(){return k*(this.$UFILiveViewersRowContainer1+1)}.bind(this)})};n.prototype.$UFILiveViewersRowContainer8=function(o){this.$UFILiveViewersRowContainer10();this.$UFILiveViewersRowContainer1=0;this.$UFILiveViewersRowContainer2=new (c('Poller'))({setupRequest:function(p,q){if(this.$UFILiveViewersRowContainer5.length===0)q.skip();var r=Date.now(),s=this.$UFILiveViewersRowContainer5.filter(function(u){return r-u.timeJoined>m}).map(function(u){return u.uniqueID}),t=c('LiveVideoCheckCurrentlyWatchingViewersQueryWebGraphQLQuery').getURI({video_id:o.videoId,viewer_ids:s});p.setURI(t).setHandler(function(u){return this.$UFILiveViewersRowContainer14(u,s)}.bind(this)).setErrorHandler(function(u){return this.$UFILiveViewersRowContainer13()}.bind(this))}.bind(this),interval:function(){return l*(this.$UFILiveViewersRowContainer1+1)}.bind(this)})};n.prototype.$UFILiveViewersRowContainer10=function(){this.$UFILiveViewersRowContainer2&&this.$UFILiveViewersRowContainer2.stop();this.$UFILiveViewersRowContainer3&&this.$UFILiveViewersRowContainer3.stop()};n.prototype.$UFILiveViewersRowContainer15=function(){this.setState({viewers:[]});this.$UFILiveViewersRowContainer10()};n.prototype.$UFILiveViewersRowContainer13=function(){this.setState({viewers:[]});this.$UFILiveViewersRowContainer1++;if(this.$UFILiveViewersRowContainer1==j)this.$UFILiveViewersRowContainer10();};n.prototype.$UFILiveViewersRowContainer16=function(o){return o.map(function(p){return {name:p.name,uniqueID:p.uniqueID,profilePicURI:p.profilePicURI,URL:p.URL}})};n.prototype.$UFILiveViewersRowContainer17=function(o){if(o.length!==this.$UFILiveViewersRowContainer5.length){return true}else for(var p=0;p<o.length;p++)if(o[p].uniqueID!==this.$UFILiveViewersRowContainer5[p].uniqueID)return true;return false};n.prototype.$UFILiveViewersRowContainer7=function(o){var p=c('LiveVideoCurrentlyWatchingViewersQueryWebGraphQLQuery').getURI({video_id:o.videoId});new (c('AsyncRequest'))(p).setHandler(function(q){return this.$UFILiveViewersRowContainer12(q)}.bind(this)).send();this.$UFILiveViewersRowContainer4=c('LiveVideoCurrentlyWatchingSubscription').subscribe(o.videoId,function(q){this.$UFILiveViewersRowContainer18(q)}.bind(this))};n.prototype.$UFILiveViewersRowContainer11=function(){this.$UFILiveViewersRowContainer4&&this.$UFILiveViewersRowContainer4.unsubscribe()};n.prototype.$UFILiveViewersRowContainer19=function(o){if(!o){this.$UFILiveViewersRowContainer13();return false}if(o.broadcast_status!==c('VideoBroadcastStatus').LIVE&&o.broadcast_status!==c('VideoBroadcastStatus').PREVIEW)return false;return true};n.prototype.$UFILiveViewersRowContainer12=function(o){var p=o.payload.data.video;if(!this.$UFILiveViewersRowContainer19(p)){this.$UFILiveViewersRowContainer15();return}var q=p.live_video_current_viewers.edges||[],r=[];q.forEach(function(s){var t=s.node,u=t.id,v=t.name,w=(t.profile_picture||{}).uri,x=t.viewer_affinity;if(u&&v&&w)r.push({name:v,uniqueID:u,profilePicURI:w,URL:t.url,rank:x,timeJoined:Date.now()});});if(this.$UFILiveViewersRowContainer17(r)){this.$UFILiveViewersRowContainer5=r;this.setState({viewers:this.$UFILiveViewersRowContainer16(r)})}};n.prototype.$UFILiveViewersRowContainer14=function(o,p){var q=o.payload.data.video;if(!this.$UFILiveViewersRowContainer19(q)){this.$UFILiveViewersRowContainer15();return}var r=q.live_video_check_current_viewers.edges||[],s=[];r.forEach(function(v){var w=v.node,x=w.id;if(x)s.push(x);});var t=[],u=this.$UFILiveViewersRowContainer5.filter(function(v){if(s.indexOf(v.uniqueID)===-1&&p.indexOf(v.uniqueID)!==-1){t.push(v.uniqueID);return false}else return true;});new (c('VideoBroadcastWhosWatchingTypedLogger'))().setPollingExtra().setSubscriptionExtra(t).setVideoID(this.props.videoId).log();if(this.$UFILiveViewersRowContainer17(u)){this.$UFILiveViewersRowContainer5=u;this.setState({viewers:this.$UFILiveViewersRowContainer16(u)})}};n.prototype.$UFILiveViewersRowContainer18=function(o){var p=o.live_video_currently_watching_subscribe.watcher,event=o.live_video_currently_watching_subscribe.event,q=p.id,r=p.name,s=(p.profile_picture||{}).uri;if(!q||!r||!s)return;var t={name:r,uniqueID:q,profilePicURI:s,URL:p.url,rank:p.viewer_affinity,timeJoined:Date.now()},u=this.$UFILiveViewersRowContainer5,v=u.length;switch(event){case c('LiveVideoCurrentlyWatchingEvent').JOIN:if(v===0){u.push(t);break}var w=0;for(var x=0;x<v;x++){if(u[x].rank>=t.rank)w=x+1;if(u[x].uniqueID===t.uniqueID)return;}u.splice(w,0,t);break;case c('LiveVideoCurrentlyWatchingEvent').LEAVE:if(v===0)return;for(var y=0;y<v;y++)if(u[y].uniqueID===t.uniqueID){u.splice(y,1);break}break;}this.$UFILiveViewersRowContainer5=u;this.setState({viewers:this.$UFILiveViewersRowContainer16(u)})};f.exports=n}),null);
__d("XLiveStreamingFundraiserAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/fundraiser\/",{eft_id:{type:"String",required:true},style:{type:"Enum",defaultValue:"box",enumType:1}})}),null);
__d("XLiveStreamingSocialViewersAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/socialviewers\/",{eft_id:{type:"String",required:true}})}),null);
__d('UFILiveStreamingController',['Arbiter','AsyncRequest','FeedFundraiserToCharityAttachmentStyle','LiveVideoInviteFriendsDialogContainer.react','React','ReactDOM','UFIAsyncWrapper','UFILiveViewersRowContainer.react','XLiveStreamingFundraiserAsyncController','XLiveStreamingSocialViewersAsyncController','clearInterval','keyMirror','setInterval'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({SOCIAL_VIEWERS:null,SOCIAL_VIEWERS_REACT:null,FUNDRAISER_BOX:null,FUNDRAISER_BORDERLESS:null,INVITE_DIALOG:null});i.initSocialViewers=function(j){return new i(j,h.SOCIAL_VIEWERS)};i.initSocialViewersReact=function(j,k,l,m,n,o,p){c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,c('React').createElement(c('UFILiveViewersRowContainer.react'),{title:k,videoId:j,shouldSubscribe:m,shouldShowInviteButton:n,shouldScrollToRow:o,inviteFriendsTitle:p})),l);return new i(j,h.SOCIAL_VIEWERS_REACT,l)};i.initSocialViewersInviteDialogReact=function(j,k,l){c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,c('React').createElement(c('LiveVideoInviteFriendsDialogContainer.react'),{videoId:j,inviteFriendsTitle:l})),k);return new i(j,h.INVITE_DIALOG,k)};i.initFundraiser=function(j,k){return new i(j,h.FUNDRAISER_BOX,k)};i.initFundraiserBorderless=function(j,k){return new i(j,h.FUNDRAISER_BORDERLESS,k)};function i(j,k,l){this.eftID=''+j;this.type=k;this.errorCount=0;this.rootElem=l;this.rootParentElem=l&&l.parentElement;var m=this.type===h.SOCIAL_VIEWERS||this.type===h.FUNDRAISER_BORDERLESS||this.type===h.FUNDRAISER_BOX;c('Arbiter').subscribe('VideoChannelView/closed',function(){this.stop()}.bind(this));c('Arbiter').subscribe('PhotoSnowlift.CLOSE',function(){this.stop()}.bind(this));c('Arbiter').subscribe('VideoChannelView/activeStoryChanged',function(n,o){if(o.id===this.eftID){if(m)this.interval=c('setInterval')(function(){return this.update()}.bind(this),2000);}else this.stop();}.bind(this));if(m){this.update();this.interval=c('setInterval')(function(){return this.update()}.bind(this),2000)}}i.prototype.update=function(){switch(this.type){case h.SOCIAL_VIEWERS:this.__updateSocialViewers();break;case h.SOCIAL_VIEWERS_REACT:case h.INVITE_DIALOG:break;case h.FUNDRAISER_BOX:this.__updateFundraiser(c('FeedFundraiserToCharityAttachmentStyle').BOX);break;case h.FUNDRAISER_BORDERLESS:this.__updateFundraiser(c('FeedFundraiserToCharityAttachmentStyle').BORDERLESS);break;}};i.prototype.__updateSocialViewers=function(){var j=c('XLiveStreamingSocialViewersAsyncController').getURIBuilder().setString('eft_id',this.eftID).getURI();new (c('AsyncRequest'))().setURI(j).setHandler(function(k){switch(k.payload.status){case 'streaming':this.errorCount=0;return;case 'not-streaming':this.stop();return;case 'error':this.errorCount+=1;if(this.errorCount===5)this.stop();return;}}.bind(this)).send()};i.prototype.__updateFundraiser=function(j){var k=this.rootParentElem&&this.rootParentElem.children[0];if(!k)return;var l=c('XLiveStreamingFundraiserAsyncController').getURIBuilder().setString('eft_id',this.eftID).setEnum('style',j).getURI();new (c('AsyncRequest'))().setRelativeTo(k).setURI(l).setHandler(function(m){switch(m.payload.status){case 'streaming':this.errorCount=0;return;case 'not-streaming':this.stop();return;case 'error':this.errorCount+=1;if(this.errorCount===5)this.stop();return;}}.bind(this)).send()};i.prototype.stop=function(){switch(this.type){case h.SOCIAL_VIEWERS_REACT:case h.INVITE_DIALOG:c('ReactDOM').unmountComponentAtNode(this.rootElem);break;case h.SOCIAL_VIEWERS:case h.FUNDRAISER_BOX:case h.FUNDRAISER_BORDERLESS:c('clearInterval')(this.interval);break;}};f.exports=i}),null);